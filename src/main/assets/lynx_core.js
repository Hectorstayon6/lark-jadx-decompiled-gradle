(function(){"use strict";var __commonJS=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},require_core=__commonJS((function(e,t){function r(){}var n=null,o={};t.exports=function(e){var t=e.setTimeout;function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,e!==r&&l(e,this)}function i(e,r){for(;3===e._state;)e=e._value;if(a._onHandle&&a._onHandle(e),0===e._state)return 0===e._deferredState?(e._deferredState=1,void(e._deferreds=r)):1===e._deferredState?(e._deferredState=2,void(e._deferreds=[e._deferreds,r])):void e._deferreds.push(r);!function(e,r){t((function(){var t=1===e._state?r.onFulfilled:r.onRejected;if(null!==t){var a=function(e,t){try{return e(t)}catch(e){return n=e,o}}(t,e._value);a===o?p(r.promise,n):s(r.promise,a)}else 1===e._state?s(r.promise,e._value):p(r.promise,e._value)}))}(e,r)}function s(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=function(e){try{return e.then}catch(e){return n=e,o}}(t);if(r===o)return p(e,n);if(r===e.then&&t instanceof a)return e._state=3,e._value=t,void c(e);if("function"==typeof r)return void l(r.bind(t),e)}e._state=1,e._value=t,c(e)}function p(e,t){e._state=2,e._value=t,a._onReject&&a._onReject(e,t),c(e)}function c(e){if(1===e._deferredState&&(i(e,e._deferreds),e._deferreds=null),2===e._deferredState){for(var t=0;t<e._deferreds.length;t++)i(e,e._deferreds[t]);e._deferreds=null}}function u(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function l(e,t){var r=!1,a=function(e,t,r){try{e(t,r)}catch(e){return n=e,o}}(e,(function(e){r||(r=!0,s(t,e))}),(function(e){r||(r=!0,p(t,e))}));r||a!==o||(r=!0,p(t,n))}return a._onHandle=null,a._onReject=null,a._noop=r,a.prototype.then=function(e,t){if(this.constructor!==a)return function(e,t,n){return new e.constructor((function(o,s){var p=new a(r);p.then(o,s),i(e,new u(t,n,p))}))}(this,e,t);var n=new a(r);return i(this,new u(e,t,n)),n},a}})),require_es6_extensions=__commonJS((function(e,t){t.exports=function(e){var t=s(!0),r=s(!1),n=s(null),o=s(void 0),a=s(0),i=s("");function s(t){var r=new e(e._noop);return r._state=1,r._value=t,r}e.resolve=function(p){if(p instanceof e)return p;if(null===p)return n;if(void 0===p)return o;if(!0===p)return t;if(!1===p)return r;if(0===p)return a;if(""===p)return i;if("object"==typeof p||"function"==typeof p)try{var c=p.then;if("function"==typeof c)return new e(c.bind(p))}catch(t){return new e((function(e,r){r(t)}))}return s(p)};var p=function(e){return"function"==typeof Array.from?(p=Array.from,Array.from(e)):(p=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};return e.all=function(t){var r=p(t);return new e((function(t,n){if(0===r.length)return t([]);var o=r.length;function a(i,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof e&&s.then===e.prototype.then){for(;3===s._state;)s=s._value;return 1===s._state?a(i,s._value):(2===s._state&&n(s._value),void s.then((function(e){a(i,e)}),n))}var p=s.then;if("function"==typeof p)return void new e(p.bind(s)).then((function(e){a(i,e)}),n)}r[i]=s,0==--o&&t(r)}for(var i=0;i<r.length;i++)a(i,r[i])}))},e.reject=function(t){return new e((function(e,r){r(t)}))},e.race=function(t){return new e((function(r,n){p(t).forEach((function(t){e.resolve(t).then(r,n)}))}))},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.done=function(e,t){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,(function(e){setTimeout((function(){throw e}),0)}))},e.prototype.finally=function(t){return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},e}})),require_rejection_tracking=__commonJS((function(e,t){t.exports=function(e,t,r){var n=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,e._onHandle=null,e._onReject=null}function i(e,t){return t.some((function(t){return e instanceof t}))}return{enable:function(s){s=s||{},o&&a(),o=!0;var p=0,c=0,u={};function l(e){(s.allRejections||i(u[e].error,s.whitelist||n))&&(u[e].displayId=c++,s.onUnhandled?(u[e].logged=!0,s.onUnhandled(u[e].displayId,u[e].error)):(u[e].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(u[e].displayId,u[e].error)))}return e._onHandle=function(e){var t;2===e._state&&u[e._rejectionId]&&(u[e._rejectionId].logged?(t=e._rejectionId,u[t].logged&&(s.onHandled?s.onHandled(u[t].displayId,u[t].error):u[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[t].displayId+".")))):r&&r(u[e._rejectionId].timeout),delete u[e._rejectionId])},e._onReject=function(e,r){0===e._deferredState&&(e._rejectionId=p++,u[e._rejectionId]={displayId:null,error:r,timeout:t(l.bind(null,e._rejectionId),i(r,n)?100:2e3),logged:!1})},e},disable:a}}})),require_src=__commonJS((function(e,t){var r=require_core(),n=require_es6_extensions(),o=require_rejection_tracking();new Function("return this")().getPromise=t.exports.getPromise=function(e){var t=e.setTimeout,a=e.onUnhandled,i=e.clearTimeout,s=function(e){return t(e,0)},p=r({setTimeout:s});return p=n(p),p=o(p,s,i).enable({allRejections:!0,onUnhandled:a})}}));require_src();var runtime=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),i=new R(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var p=u(e,t,r);if("normal"===p.type){if(n=r.done?d:f,p.arg===v)continue;return{value:p.arg,done:r.done}}"throw"===p.type&&(n=d,r.method="throw",r.arg=p.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",v={};function y(){}function m(){}function _(){}var g={};g[a]=function(){return this};var E=Object.getPrototypeOf,b=E&&E(E(D([])));b&&b!==r&&n.call(b,a)&&(g=b);var x=_.prototype=y.prototype=Object.create(g);function A(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,s){var p=u(e[o],e,a);if("throw"!==p.type){var c=p.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(p.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function C(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=x.constructor=_,_.constructor=m,m.displayName=p(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,p(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},A(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(x),p(x,s,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var p=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(p&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(p){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),v}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(e){Function("r","regeneratorRuntime = r")(runtime)}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e_1,_a;function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var lifeCycles=["onLoad","onShow","onHide","onReady","onDestroy","onError","onFirstScreen"],lifeCycleFun={},noop=function(){},ErrorCode;try{for(var lifeCycles_1=__values(lifeCycles),lifeCycles_1_1=lifeCycles_1.next();!lifeCycles_1_1.done;lifeCycles_1_1=lifeCycles_1.next()){var name=lifeCycles_1_1.value;lifeCycleFun[name]=noop}}catch(e){e_1={error:e}}finally{try{lifeCycles_1_1&&!lifeCycles_1_1.done&&(_a=lifeCycles_1.return)&&_a.call(lifeCycles_1)}finally{if(e_1)throw e_1.error}}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.UNKNOWN=1]="UNKNOWN",e[e.NODE_NOT_FOUND=2]="NODE_NOT_FOUND",e[e.METHOD_NOT_FOUND=3]="METHOD_NOT_FOUND",e[e.PARAM_INVALID=4]="PARAM_INVALID",e[e.SELECTOR_NOT_SUPPORTED=5]="SELECTOR_NOT_SUPPORTED"}(ErrorCode||(ErrorCode={}));var LYNX_CORE={filename:"lynx_core",slot:"unknown_commit_hash"},componentLifeCycles=["created","attached","ready","moved","detached"],DEFAULT_ENTRY="__CARD__",CARD_CONFIG_STR="__card_config_",CARD_CONFIG_THEME="theme",CARD_CONFIG_THEME_UPDATED="onThemeChanged",ShareDataSubject=function(){function e(){this.observersFunc=[]}return e.prototype.registerObserver=function(e){if(this.observersFunc.includes(e))return nativeConsole.log("Subject: Observer has been attached already.");this.observersFunc.push(e)},e.prototype.removeObserver=function(e){var t=this.observersFunc.indexOf(e);if(-1===t)return nativeConsole.log("Subject: Nonexistent observer.");this.observersFunc.splice(t,1)},e.prototype.notifyDataChange=function(e){var t,r;try{for(var n=__values(this.observersFunc),o=n.next();!o.done;o=n.next()){var a=o.value;if("function"==typeof a)try{a(e)}catch(e){nativeConsole.log("SharedData change and notifyDataChange error info:"+e)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e}(),_global=function(){return this||(0,eval)("this")}();_global.multiApps={},_global.currentAppId="",_global.globComponentRegistPath="",_global.sharedData={},_global.globDynamicComponentEntry=DEFAULT_ENTRY,_global.shareDataSubject=new ShareDataSubject,_global.TaroLynx={},_global.bundleSupportLoadScript=!0;var loadScript=_global.loadScript,EventEmitter=function(){function e(e){this._internal_callNativeModule=e,this._events=new Map}return e.prototype.addListener=function(e,t,r){var n=this._events.get(e);"keyboardstatuschanged"==e&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!0]),n?n.push({listener:t,context:r}):this._events.set(e,[{listener:t,context:r}])},e.prototype.removeListener=function(e,t){var r,n;if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var o=this._events.get(e),a=!1,i=0;if(Array.isArray(o)){try{for(var s=__values(o),p=s.next();!p.done;p=s.next()){if(t===p.value.listener){a=!0;break}i++}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}a&&o.splice(i,1)}"keyboardstatuschanged"==e&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!1])},e.prototype.emit=function(e,t){var r,n,o=this._events.get(e);if(Array.isArray(o))try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,p=s.listener,c=s.context;"function"==typeof p&&p.apply(c||this,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}else nativeConsole.warn("emit event "+e+" is not register.")},e.prototype.removeAllListerners=function(e){this._events.delete(e)},e.prototype.removeAllListeners=function(e){this._events.delete(e)},e.prototype.trigger=function(e,t){var r,n,o=this._events.get(e);if(Array.isArray(o)){"string"==typeof t&&(t=JSON.parse(t));try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,p=s.listener,c=s.context;"function"==typeof p&&p.call(c||this,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}else nativeConsole.warn("trigger event "+e+" is not register.")},e.prototype.toggle=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit(e,t)},e}(),BaseError=function(e){function t(t,r){var n=e.call(this,t)||this;return r&&(n.stack=r),n}return __extends(t,e),t}(Error),InternalError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind="INTERNAL_ERROR",t}return __extends(t,e),t}(BaseError),UserError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind="USER_ERROR",t}return __extends(t,e),t}(BaseError),UserValidateError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="USER_VALIDATE_ERROR",t}return __extends(t,e),t}(UserError),UserRuntimeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="USER_RUNTIME_ERROR",t}return __extends(t,e),t}(UserError),InternalRuntimeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="INTERNAL_RUNTIME_ERROR",t}return __extends(t,e),t}(InternalError),InvokeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="INVOKE_ERROR",t}return __extends(t,e),t}(InternalError),AppServiceEngineKnownError=function(e){function t(t){var r=e.call(this,"APP-SERVICE-Engine: "+t)||this;return r.type="AppServiceEngineKnownError",r}return __extends(t,e),t}(Error),ttConsole=_global.nativeConsole,LynxJSBI=_global.LynxJSBI;function hasProperty(e,t){return Object.prototype.hasOwnProperty.call(e||{},t)}function getDataType(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function isString(e){return"String"===getDataType(e)}function isObject(e){return"Object"===getDataType(e)}function isFunction(e){return"Function"===getDataType(e)}function isArray(e){return"Array"===getDataType(e)}function isNull(e){return null===e}function isUndefined(e){return void 0===e}function isNullOrUndef(e){return isUndefined(e)||isNull(e)}var ThirdScriptError=function(e){function t(t){var r=e.call(this,""+t)||this;return r.type="ThirdScriptError",r}return __extends(t,e),t}(Error),AppServiceSdkKnownError=function(e){function t(t){var r=e.call(this,"APP-SERVICE-SDK: + "+t)||this;return r.type="AppServiceSdkKnownError",r}return __extends(t,e),t}(Error);function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function noop$1(){}function forEachRight(e,t){if(!Array.isArray(e))throw new Error("forEachRight ERROR: first params must be array.");for(var r=e.length-1;r>=0;r--)t(e[r])}function callbackMerge(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)e[t]()}function isEmptyObject(e){return!(!e||!Object.keys(e).length)}function formatException(e){var t=eventFromException(e);return t.sdk=addSdkInfo(),t.platform="javascript",t}function addSdkInfo(){return{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"5.15.5"}],version:"5.15.5",integrations:["InboundFilters","FunctionToString","Breadcrumbs","GlobalHandlers","LinkedErrors","UserAgent"]}}function eventFromException(e){var t;return isError(e)&&(addExceptionMechanism(t=eventFromStacktrace(computeStackTrace(e)),{handled:!0,type:"generic"}),t.level="error"),t}function addExceptionMechanism(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(r){e.exception.values[0].mechanism[r]=t[r]}))}catch(e){}}var UNKNOWN_FUNCTION="?",chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/;function computeStackTrace(e){var t=null,r=null==e?void 0:e.framesToPop;try{if(t=computeStackTraceFromStackProp(e))return popFrames(t,r)}catch(e){}return{message:extractMessage(e),name:null==e?void 0:e.name,stack:[],failed:!0}}function computeStackTraceFromStackProp(e){var t,r,n,o=[],a=e.stack.split("\n");if(!e||!e.stack)return null;for(var i=0;i<a.length;++i){if(r=chrome.exec(a[i])){var s=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=chromeEval.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),n={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||UNKNOWN_FUNCTION,args:s?[r[2]]:[],line:r[3]?+Number(r[3]):null,column:r[4]?+Number(r[4]):null}}else if(r=winjs.exec(a[i]))n={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+Number(r[3]),column:r[4]?+Number(r[4]):null};else{if(!(r=gecko.exec(a[i])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=geckoEval.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=t[1],r[4]=t[2],r[5]=""):0!==i||r[5]||void 0===e.columnNumber||(o[0].column=e.columnNumber+1),n={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+Number(r[4]):null,column:r[5]?+Number(r[5]):null}}!n.func&&n.line&&(n.func=UNKNOWN_FUNCTION),o.push(n)}return o.length?{message:extractMessage(e),name:e.name,stack:o}:null}function extractMessage(e){var t=null==e?void 0:e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function popFrames(e,t){try{return Object.assign({},e,{stack:e.stack.slice(t)})}catch(t){return e}}function eventFromStacktrace(e){return{exception:{values:[exceptionFromStacktrace(e)]}}}function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(e,Error)}}function isInstanceOf(e,t){try{return e instanceof t}catch(e){return!1}}function exceptionFromStacktrace(e){var t=prepareFramesForEvent(e.stack),r={type:e.name,value:e.message};return(null==t?void 0:t.length)&&(r.stacktrace={frames:t}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function prepareFramesForEvent(e){if(!e||!e.length)return[];var t=e,r=t[0].func||"",n=t[t.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(t=t.slice(1)),-1!==n.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).slice(0,50).reverse()}var RUNTIME=function(e){return e.filename};function collectTags(e,t,r){return{lib_version:"unknown_build_version",version_code:"unknown_version",run_type:RUNTIME(r),extra:e,error_type:t}}function sentryReport(e,t,r){var n=e.rawError;try{nativeConsole.log("prod sentry data:",e),t.reportException(JSON.stringify(e),n.stack)}catch(e){nativeConsole.error("sentryReport error:",null==e?void 0:e.message)}}function reportError(e,t,r){var n=null!=r?r:{},o=n.runType,a=void 0===o?LYNX_CORE:o,i=n.originError,s=e.stack;e.stack=formatStack(e,a);var p=formatException(e);try{var c=collectTags(e.message,e.name,a),u=appendTags(e,createBeforeSend(p,a,null==r?void 0:r.proxy),c,a);u.rawError={stack:s,message:e.message},sentryReport(u,t,i)}catch(e){nativeConsole.error("reportError err:\n",e)}}function legacyReportError(e,t,r,n,o){return void 0===r&&(r=LYNX_CORE),reportError(e,t,{runType:r,originError:n,proxy:o})}function reportThrowError(e){var t=e.error,r=e.nativeApp,n=e.runType,o=void 0===n?LYNX_CORE:n;reportError(t,r,{originError:e.rawError,runType:o,proxy:e.proxy})}function appendTags(e,t,r,n){var o="USER_ERROR"===e.kind?"USER_ERROR":"INTERNAL_ERROR";return{sentry:__assign(__assign({},t),{tags:r}),pid:o,url:"file://"+RUNTIME(n)+".js"}}function formatStack(e,t){return e.stack?e.stack.split("\n").filter((function(e){return e.split(":").length>2})).map((function(e){if(e.includes("file://"))return e;var r=t.filename+".js";return e.replace(r,"file://"+r)})).join("\n"):""}function createBeforeSend(e,t,r){var n,o,a,i=null===(a=null===(o=null===(n=e.exception)||void 0===n?void 0:n.values)||void 0===o?void 0:o[0])||void 0===a?void 0:a.stacktrace;return(null==i?void 0:i.frames)&&i.frames.forEach((function(e){var n=t.slot,o=t.filename;-1!==e.filename.indexOf(o)?(e.filename=o+"."+n+".js",e.release=n):e.release=null==r?void 0:r.__sourcemap__release__})),e}function wrapUserFunction(e,t,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("USER_ERROR",e,r,t,n):noop$1}function wrapFunction(e,t,r,n,o){return void 0===e&&(e="INTERNAL_ERROR"),function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{return r.apply(this,a)}catch(a){var s=t+" \n"+a.message;"onError"!==r.name&&n.onError("Card "+r.name+" exec error:"+s+"\n"+a.stack);var p="INTERNAL_ERROR"===e?new InternalRuntimeError(s,a.stack):new UserRuntimeError(s,a.stack);nativeConsole.log("wrapError-"+t,p),reportError(p,n._nativeApp,{runType:o,proxy:null==n?void 0:n.__proxy})}}}function wrapInnerFunction(e,t,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("INTERNAL_ERROR",e,r,t,n):noop$1}var shallowClone=function(e){var t={};return isObject(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]})),t},shallowMergeEx=function(e,t,r){void 0===r&&(r=!1);var n={};return isObject(e)&&Object.keys(e).forEach((function(t){n[t]=e[t]})),isObject(e)&&Object.keys(t).forEach((function(e){isNull(t[e])&&r||(n[e]=t[e])})),n},deepClone=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function o(a,s,p,c,u){"object"==typeof s&&(p=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var l=[],f=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===p&&(p=1/0),function a(p,d){if(null===p)return null;if(0===d)return p;var v,y;if("object"!=typeof p)return p;if(e(p,t))v=new t;else if(e(p,r))v=new r;else if(e(p,n))v=new n((function(e,t){p.then((function(t){e(a(t,d-1))}),(function(e){t(a(e,d-1))}))}));else if(o.__isArray(p))v=[];else if(o.__isRegExp(p))v=new RegExp(p.source,i(p)),p.lastIndex&&(v.lastIndex=p.lastIndex);else if(o.__isDate(p))v=new Date(p.getTime());else{if(h&&Buffer.isBuffer(p))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(p.length):new Buffer(p.length),p.copy(v),v;e(p,Error)?v=Object.create(p):void 0===c?(y=Object.getPrototypeOf(p),v=Object.create(y)):(v=Object.create(c),y=c)}if(s){var m=l.indexOf(p);if(-1!==m)return f[m];l.push(p),f.push(v)}for(var _ in e(p,t)&&p.forEach((function(e,t){var r=a(t,d-1),n=a(e,d-1);v.set(r,n)})),e(p,r)&&p.forEach((function(e){var t=a(e,d-1);v.add(t)})),p){var g=void 0;y&&(g=Object.getOwnPropertyDescriptor(y,_)),g&&null==g.set||(v[_]=a(p[_],d-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(p);for(_=0;_<E.length;_++){var b=E[_];(!(A=Object.getOwnPropertyDescriptor(p,b))||A.enumerable||u)&&(v[b]=a(p[b],d-1),A.enumerable||Object.defineProperty(v,b,{enumerable:!1}))}}if(u){var x=Object.getOwnPropertyNames(p);for(_=0;_<x.length;_++){var A,w=x[_];(null==(A=Object.getOwnPropertyDescriptor(p,w))?void 0:A.enumerable)||(v[w]=a(p[w],d-1),Object.defineProperty(v,w,{enumerable:!1}))}}return v}(a,p)}function a(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=a,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},o.__getRegExpFlags=i,o}(),NodeRef=function(){function e(e,t,r,n,o){this._selectorName=r,n&&n.length>0?this._ancestorSelectorNames=__spread(n):this._ancestorSelectorNames=[],this._rootComponentId=t,this._nativeLynxUIModule=e,this._isCallByRefId=o}return e.prototype.getNodeRef=function(t){return new e(this._nativeLynxUIModule,this._rootComponentId,t,__spread(this._ancestorSelectorNames,[this._selectorName]),this._isCallByRefId)},e.prototype.invoke=function(e){this._nativeLynxUIModule.invokeUIMethod(this._rootComponentId,__spread(this._ancestorSelectorNames,[this._selectorName]),e.method,Object.assign({_isCallByRefId:this._isCallByRefId},e.params),(function(t){0===t.code?e.success&&e.success(t.data):e.fail&&e.fail(t)}))},e.prototype.scrollIntoView=function(e){void 0===e&&(e=!0);var t={};if("boolean"==typeof e)t=e?{behavior:"auto",block:"start",inline:"nearest"}:{behavior:"auto",block:"end",inline:"nearest"};else{if("object"!=typeof e)throw new Error("scrollIntoView only support boolean or object");t=e}this.invoke({method:"scrollIntoView",params:{scrollIntoViewOptions:t},fail:function(e){nativeConsole.error("NodeRef.scrollIntoView failed","ErrorCode: "+e.code)}})},e}(),compPrefix=1,globalId=1,propsIdMap={},nextTick;function genCompPrefix(){return String(compPrefix++)}function genPropsId(e){return propsIdMap[e]||(propsIdMap[e]=String(globalId++)),propsIdMap[e]}"iOS"===(_global.SystemInfo||{}).platform?nextTick=function(e){"function"==typeof e&&e()}:eval("nextTick = Promise.resolve().then.bind(Promise.resolve())");var nextTick$1=nextTick,dataTypeSet=new Set(["String","Number","Array","Object","Boolean","Null","Function"]),reserveKey=new Set(["__globalProps","SystemInfo"]),deepEqual=function(e,t){if(getDataType(e)===getDataType(t)){if(isArray(e)){if(e.length!==t.length)return!1;var r=!0;return e.some((function(e,n){return!(r=deepEqual(e,t[n]))})),r}if(isObject(e)){var n=!0,o=Object.keys(e);return o.length!==Object.keys(t).length?n=!1:(o.some((function(r){return!(n=deepEqual(e[r],t[r]))})),n)}return e===t}return!1},diffData=function(e,t,r){var n={};if(isObject(t)){var o=Object.keys(t);if(o.length)(r&&r.length?r:o).forEach((function(r){var o=t[r];dataTypeSet.has(getDataType(o))&&(isObject(e)&&deepEqual(e[r],o)||(n[r]=o))}))}return n},filterReactComponentData=function(e){var t={};return isObject(e)&&Object.keys(e).forEach((function(r){var n=e[r],o=getDataType(n);dataTypeSet.has(o)&&!reserveKey.has(r)&&(t[r]=n)})),t},ReactComponent=function(){function e(e){void 0===e&&(e={}),this.prevProps={},this.prevState={},this.nextProps={},this.nextState={},this.$init=!1,this.$cardInit=!1,this.$prefix="",this.componentId="",this.globalProps=null,this.state={},this.props=e,this.prevProps={},this.prevState={},this._microTaskPending=!1,this._queue=[],this._cbs=[],this.$prefix=genCompPrefix(),this.setComponentConfig(this.constructor),this.$refs=[],this.$pureData={}}return Object.defineProperty(e.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),e.prototype.executeJSRender=function(){var e=this._createData();return this.bindRef(),e},e.prototype.bindRef=function(){var e=this;!this.$refs||this.$refs.length<1||this.$refs.forEach((function(t){e.bindComponent(t)}))},e.prototype.bindComponent=function(e){var t=null;"native"===e.type?t=this.getNodeRef(e.refId,!0):"com"===e.type&&isString(this.$pureData[e.refId])&&(t=this._reactAppInstance._getComponent(this.$pureData[e.refId]));var r=typeof e.ref;isObject(t)&&("function"===r?e.ref.call(this,t):"object"===r&&"current"in e.ref&&(e.ref.current=t,e.ref.id=this.componentId))},e.prototype.bindSingleRef=function(e){var t=this.$refs.find((function(t){return t.refId===e}));isObject(t)&&this.bindComponent(t)},e.prototype.updateTheme=function(e,t){void 0===t&&(t=!1);var r=this;try{var n=getDataType(e);if("Object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};t?Object.assign(o,e):Object.assign(o,r.theme,e),Object.keys(o).forEach((function(e){o[e]||delete o[e]})),r._nativeApp.updateData({__card_config_:{theme:o}}),r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o)}catch(e){var a=e||{},i=a.message,s=a.stack;reportThrowError({error:new InternalRuntimeError("updateTheme error: "+i,s),nativeApp:r._nativeApp,rawError:e,proxy:void 0}),r.componentDidCatch&&r.componentDidCatch(i)}},e.prototype.setState=function(e,t){var r=this,n=null;try{var o=getDataType(e);if("Function"===o)n=e(r.state,r.props);else{if("Object"!==o)throw new Error("setState's first param must be object/function, you pass "+o);n=e}var a=getDataType(t);if(t&&"Function"!==a)throw new Error("setState's second param must be function, you pass "+a);this.nextProps=this.props,isFunction(this.shouldComponentUpdate)?this.nextState=deepClone(this.state):this.nextState=this.state,r.nextState=Object.assign(r.nextState,n);var i=null,s={};if(r.$hasDerivedFunction){var p=r._reactAppInstance.rlynxVersion;p&&p>0||(i=r.$class.getDerivedStateFromProps(r.nextProps,r.nextState),s=diffData(this.nextState,i),r.nextState=Object.assign(r.nextState,i||{}))}var c=!0;if(isFunction(this.shouldComponentUpdate)&&(c=r.shouldComponentUpdate(this.nextProps,this.nextState)),this.state=this.nextState,!c){var u=Object.assign({},n,s);return void(Object.keys(u).length&&(u.$$shouldComponentUpdate=!1,this.dataQueueUpdate(r,u,wrapUserFunction("at setState/dataQueueUpdate",r,t).bind(r))))}var l=r.executeJSRender(),f=diffData(this.state,l);r.state=Object.assign(r.state,l);var h=Object.assign({},n,s,f);Object.keys(h).length&&this.dataQueueUpdate(r,h,wrapUserFunction("at setState/dataQueueUpdate",r,t).bind(r))}catch(e){var d=e||{},v=d.message,y=d.stack;reportThrowError({error:new InternalRuntimeError("setState error: "+v,y),nativeApp:r._nativeApp,rawError:e,proxy:void 0}),r.componentDidCatch&&r.componentDidCatch(v)}},e.prototype.updateDataToNative=function(e){e&&Object.keys(e).length&&this.dataQueueUpdate(this,e,(function(){}))},e.prototype.dataQueueUpdate=function(e,t,r){var n=this,o=n._pendingState,a=e._queue;if(isNullOrUndef(o))n._pendingState=t;else for(var i in t)({}).hasOwnProperty.call(t,i)&&(o[i]=t[i]);a.includes(n)||a.push(n),isFunction(r)&&(Array.isArray(n._cbs)||(n._cbs=[]),n._cbs.push(r.bind(n))),e._microTaskPending||(e._microTaskPending=!0,nextTick$1((function(){var t,r=[];for(e._microTaskPending=!1;t=a.pop();){var n=t.$type,o=t.componentId,i=t._cbs,s=t._pendingState,p=callbackMerge.bind(t,i);t._pendingState=null,t._cbs=[],r.push({type:n,componentId:o,data:s,callback:p})}e._nativeApp.batchedUpdateData(r)})))},e.prototype.registerModule=function(e,t){this._reactAppInstance._lazyCallableModules[e]=t},e.prototype.initJSModule=function(e){this._reactAppInstance=e,this.registerModule("GlobalEventEmitter",this._reactAppInstance.GlobalEventEmitter),this.registerModule("BDLynxAPIModule",this._reactAppInstance._BDLynxAPIModule);var t=(_global.BDLynxSDKCore||{}).registerNativeEvent;"function"==typeof t&&t(this._reactAppInstance._lazyCallableModules.BDLynxAPIModule)},e.prototype.setComponentConfig=function(e){this.$class=e,this.$hasDerivedFunction=!!isFunction(e.getDerivedStateFromProps);var t=e.__config,r=t.appInstance.lynx;this.$type=t.$type,this._nativeApp=t.appInstance.nativeApp,this._reactAppInstance=t.appInstance,this.setGlobalProps(r,t.initData),this.initJSModule(t.appInstance),this.GlobalEventEmitter=this._reactAppInstance.GlobalEventEmitter,r.getJSModule=this.getJSModule.bind(this)},e.prototype.getJSModule=function(e){return this._reactAppInstance._lazyCallableModules[e]},e.prototype.getNodeRef=function(e,t){return"component"===this.$type?new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,e,[],t):new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e,[],t)},e.prototype.getNodeRefFromRoot=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},e.prototype.addGlobalEventListener=function(e,t,r){this.getJSModule("GlobalEventEmitter").addListener(e,t,r)},e.prototype.setSharedData=function(e,t){_global.sharedData[e]=t},e.prototype.getSharedData=function(e){return _global.sharedData[e]},e.prototype.setGlobalProps=function(e,t){e&&!e.__globalProps&&t&&t.__globalProps&&(e.__globalProps=t.__globalProps)},e.prototype.triggerEvent=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(e,{eventDetail:t,eventOption:r,componentId:o})}catch(e){var a=e||{},i=a.message,s=a.stack;reportThrowError({error:new InternalRuntimeError("Component "+(i="triggerEvent error: "+i),s),nativeApp:n._nativeApp,rawError:e,proxy:void 0}),n._reactAppInstance.onAppError(i)}},e.prototype.componentDidCatch=function(e){},e.prototype.componentDidMount=function(){},e.prototype.componentWillUnmount=function(){},e.prototype.componentDidUpdate=function(e,t,r){},e.prototype.componentDidShow=function(){},e.prototype.componentDidHide=function(){},e}(),propsMap=function(){function e(){this._map={}}return e.prototype.set=function(e,t){void 0===e&&(e={}),this._map[t]=e},e.prototype.getProps=function(e){return this._map[e]},e.prototype.deleteProps=function(e){delete this._map[e]},e.prototype.clear=function(){this._map={}},e}(),IntersectionObservationTarget=function(){function e(e,t){this._selector=e,this._callback=t}return e.prototype.invokeCallback=function(e){this._callback(e)},e}(),IntersectionObserver=function(){function e(e,t,r){this._id=e,this._intersectionObserverModule=t,this._manager=r,this._observationTargets=[],this._defaultMargins={left:0,right:0,top:0,bottom:0}}return e.prototype.relativeTo=function(e,t){return this._intersectionObserverModule.relativeTo(this._id,e,t||this._defaultMargins),this},e.prototype.relativeToViewport=function(e){return this._intersectionObserverModule.relativeToViewport(this._id,e||this._defaultMargins),this},e.prototype.observe=function(e,t){this._observationTargets.push(new IntersectionObservationTarget(e,t)),this._intersectionObserverModule.observe(this._id,e,this._observationTargets.length-1)},e.prototype.disconnect=function(){this._intersectionObserverModule.disconnect(this._id),this._manager.removeObserver(this._id)},e.prototype.invokeCallback=function(e,t){e<this._observationTargets.length&&this._observationTargets[e].invokeCallback(t)},e}(),IntersectionObserverManager=function(){function e(e){this._nativeModules=e,this._observerId=0,this._observers={},this._defaultOptions={thresholds:[0],initialRatio:0,observeAll:!1}}return e.prototype.createIntersectionObserver=function(e,t){var r=this._nativeModules.IntersectionObserverModule,n=new IntersectionObserver(this._observerId,r,this);return this._observers[this._observerId]=n,r.createIntersectionObserver(this._observerId,e,t||this._defaultOptions),this._observerId++,n},e.prototype.getObserver=function(e){return this._observers[e]},e.prototype.removeObserver=function(e){this._observers[e]=null},e}(),HookType,currentIndex,appInstance,options,currentHookType;function isFunctionComponent(e){return e&&e.$_isFunctionComponent}function getCurComponent(){return appInstance}function invokeOrReturn(e,t){return"function"==typeof t?t(e):t}function invokeCleanup(e){"function"==typeof e._cleanup&&e._cleanup()}function invokeEffect(e){e._cleanup=e._value()}function argsChanged(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}function findIgnoreFieldsWithHook(e,t){var r=-1,n=[];if(e&&e.$_hookStateKeys&&e.$_hookStateKeys.length){for(var o=e.__hooks._list.filter((function(e){return e._type===HookType.useState||e._type===HookType.useReducer})),a=0;a<o.length;a++)if(o[a]===t){r=a;break}-1!==r&&e.$_hookStateKeys.forEach((function(e,t){t!==r&&n.push(e)}))}return n}function getHookState(e){var t=getCurComponent(),r=t.__hooks||(t.__hooks={_list:[],_pendingEffects:[]});return e>=r._list.length&&r._list.push({_type:currentHookType}),currentHookType=HookType.none,r._list[e]}function mountHooks(e,t){appInstance=e,options=t||{}}function resetHooks(e){currentIndex=0,appInstance=e}function executeEffects(e){var t=e.__hooks;t&&(t._pendingEffects.forEach(invokeCleanup),t._pendingEffects.forEach(invokeEffect),t._pendingEffects=[])}function cleanUpHooks(e){if(e&&e.__hooks)try{e.__hooks._list.forEach(invokeCleanup)}catch(e){options.catchError(e)}}function useEffect(e,t){currentHookType=HookType.useEffect;var r=getCurComponent(),n=getHookState(currentIndex++);!options._skipEffects&&argsChanged(n._args,t)&&(n._value=e,n._args=t,r.__hooks._pendingEffects.push(n))}function useReducer(e,t,r){currentHookType===HookType.none&&(currentHookType=HookType.useReducer);var n=getCurComponent(),o=getHookState(currentIndex++);return o._reducer=e,o._component||(o._value=[r?r(t):invokeOrReturn(void 0,t),function(e){var t=o._reducer(o._value[0],e);o._value[0]!==t&&(o._value=[t,o._value[1]],o._component.setHookState(findIgnoreFieldsWithHook(n,o)))}],o._component=n),o._value}function useState(e){return currentHookType=HookType.useState,useReducer(invokeOrReturn,e,null)}function useMemo(e,t){currentHookType===HookType.none&&(currentHookType=HookType.useMemo);var r=getHookState(currentIndex++);return argsChanged(r._args,t)&&(r._value=e(),r._args=t,r._factory=e),r._value}function useCallback(e,t){return currentHookType=HookType.useCallback,useMemo((function(){return e}),t)}function useRef(e){return currentHookType=HookType.useRef,useMemo((function(){return{current:e,id:null}}),[])}function useInstance(){return getCurComponent()}function syncInsHookState(e,t,r){if(void 0===r&&(r=!1),e&&e.$_hookStateKeys&&"object"==typeof t){var n=e.$_hookStateKeys;n.length&&Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(o){var a=null;if(!r||!isNull(t[o])){var i=n.findIndex((function(e){return e===o}));if(-1!=i)(a=(e.__hooks&&e.__hooks._list?e.__hooks._list.filter((function(e){return e._type===HookType.useState||e._type===HookType.useReducer})):[])[i])&&(a._value[0]=t[o])}}))}}!function(e){e[e.none=0]="none",e[e.useState=1]="useState",e[e.useReducer=2]="useReducer",e[e.useEffect=3]="useEffect",e[e.useMemo=4]="useMemo",e[e.useCallback=5]="useCallback",e[e.useRef=6]="useRef"}(HookType||(HookType={}));var Hooks={useState:useState,useReducer:useReducer,useEffect:useEffect,useMemo:useMemo,useCallback:useCallback,useRef:useRef,mountHooks:mountHooks,cleanUpHooks:cleanUpHooks,executeEffects:executeEffects,resetHooks:resetHooks,syncInsHookState:syncInsHookState,useInstance:useInstance},ReactFcComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.executeJSRender=function(){return Hooks.resetHooks(this),this._createData()},t.prototype.setHookState=function(e){var t=this;try{var r=t.executeJSRender();e.length&&e.forEach((function(e){return delete r[e]}));var n=diffData(this.state,r);t.state=Object.assign(t.state,r),Object.keys(n).length&&this.updateDataToNative(n)}catch(e){var o=e||{},a=o.message,i=o.stack;reportThrowError({error:new InternalRuntimeError("setHookState error: "+a,i),nativeApp:t.nativeApp,rawError:e,proxy:void 0})}},t}(ReactComponent);function needPromisePolyfill(){return!0}function getPromiseMaybePolyfill(e,t,r){if(needPromisePolyfill()){var n=_global.getPromise;return"function"==typeof n?n({setTimeout:e,onUnhandled:t,clearTimeout:r}):_global.Promise}return _global.Promise}function clearHeliumCanvas(e){var t=e;if(t._heliumData)try{if(t._heliumData.medias&&t._heliumData.medias.forEach((function(e,t,r){try{var n=e;n&&(n.stop&&n.stop(),n.src=null,n.dispatchEvent&&(n.dispatchEvent=function(){}))}catch(e){}})),t._heliumData.canvases&&t._heliumData.canvases.forEach((function(e,t,r){try{var n=e;n&&n.dispose&&n.dispose()}catch(e){}})),t._heliumData.audioCtx)try{t._heliumData.audioCtx._unref()}catch(e){}if(t._heliumData.hardware)try{t._heliumData.hardware.dispose()}catch(e){}}catch(e){}t._heliumData=null}function initHeliumCanvas(e,t){var r=e,n=r.lynx;if(!r._heliumData){r._heliumData={helium:null,aurum:null,medias:[],canvases:[],audioCtx:null,hardware:null,effect:null,napi:null};var o=function(){return r._heliumData.helium||(r._heliumData.helium=r._nativeApp.heliumProxy())};n.helium=o;var a=function(){return r._heliumData.aurum||(r._heliumData.aurum=r._nativeApp.heliumProxy("Aurum"))};n.aurum=a;var i=function(){return"?_lynxId="+(r._params?r._params.appGUID:"")};n.createCanvas=function(e,t,n){var a=r._nativeApp.createCanvas(e);if(!a)return null;var i=o().touchables[a];if(!i)return null;if(r._heliumData.canvases.push(i),arguments.length>=3)t>0&&n>0&&(i.width=t,i.height=n);else{var s=1;(s=2==arguments.length?t:o().require("scandium").ratio)>0&&1!==s&&(i.width*=s,i.height*=s)}return i},n.createImage=function(e){var t=new(o().Image)(i());return t.setLynxSrc=function(e){this.src=e},e&&(t.src=e),r._heliumData.medias.push(t),t},n.createVideo=function(e){var t=new(o().Video)(i());return t.setLynxSrc=function(e){this.src=e},r._heliumData.medias.push(t),e&&(t.src=e),t},n.readFileSync=function(e,t){var r=o().require("scandium"),n=t&&t.encoding?r.LOAD_TEXT:r.LOAD_ARRAYBUFFER;return r.loadSync(e+i(),n)},n.readFile=function(e,t,n){var a=o().require("scandium"),s=n&&n.encoding?a.LOAD_TEXT:a.LOAD_ARRAYBUFFER;a.loadAsync(e+i(),s,(function(e){null!=r._nativeApp&&t&&t(e)}))},n.createOffscreenCanvas=function(e,t){var n=new(o().Canvas)(0,e>0?e:300,t>0?t:300);return n&&r._heliumData.canvases.push(n),n},n.createAudio=function(e){var t=new(0,a().Audio);return t._url_suffix=i(),t.setLynxSrc=function(e){this.src=e+this._url_suffix},r._heliumData.medias.push(t),e&&(t.src=e+t._url_suffix),t},n.getAudioContext=function(){var e=r._heliumData.audioCtx;if(!e){var t=a().AudioContext,n=(e=r._heliumData.audioCtx=new t)._ref;n&&n()}return e},n.getHardWareManager=function(){if(!r._heliumData.hardware){var e=r._nativeApp.heliumProxy("hardware").HardWareManager;r._heliumData.hardware=new e}return r._heliumData.hardware},n.getEffect=function(){var e=r._heliumData.effect;if(e||!r._nativeApp.validateEffect())return e;var t=o();return e={createFaceInfoConvertor:t.createAnimojiDetector,createFaceDetector:t.createFaceDetector,createAnimojiDetector:t.createAnimojiDetector,ab2AnimojiResult:t.ab2AnimojiResult,createHandDetector:t.createHandDetector,createHandInfoConvertor:t.createHandInfoConvertor,createSkeletonDetector:t.createSkeletonDetector,createSlamInfoConvertor:t.createSlamInfoConvertor,createSlamDetector:t.createSlamDetector}},n.napi=function(){return r._heliumData.napi||(r._heliumData.napi=r._nativeApp.heliumProxy("napi"))};var s=function(e,t,r){e.media.request(e.media.AUDIO,(function(e){r&&(e&&e.success?r(t()):r(null,e&&e.errMsg?e.errMsg:"unknown"))}))},p=function(e,t,r){var n=e.media,o=n.VIDEO,a=t.facingMode;"object"==typeof a&&(o|=n.EXACT,a=a.exact),"environment"!==a&&"back"!==a||(o|=n.BACK),t.beautify&&(o|=n.BEAUTIFY),t.landscape&&(o|=n.LANDSCAPE_RIGHT),t.animoji&&(o|=n.ANIMOJI),t.hand&&(o|=n.HAND),t.hairParser&&(o|=n.HAIRPARSE),t.matting&&(o|=n.MATTING),t.skeleton&&(o|=n.SKELETON),t.planeTrack&&(o|=n.PLANETRACK),t.sticker&&(o|=n.STICKER);var i=t.pageId||0;n.request(o,(function(e){r&&(e&&e.success?r(e):r(null,e&&e.errMsg?e.errMsg:"unknown"))}),i)};n.getUserMedia=function(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n=function(){});var i=function(e,o){r._nativeApp&&e?t(e):n(o)};if(e&&e.video){var c=e.video instanceof Object?e.video:{};p(o(),c,i)}else if(e&&e.audio){var u=a().setupCapture;s(o(),u,i)}else n("error params")},n.requestMicrophone=function(){return new t((function(e,t){var n=a().setupCapture;s(o(),n,(function(n,o){null==r._nativeApp?t(new Error("Native app is released. !!!Please do not call any native related functions. ")):n?e(n):t(new Error(o))}))}))},n.pauseMicrophone=function(){var e=a().pauseCapture;e&&e()},n.resumeMicrophone=function(){var e=a().resumeCapture;e&&e()},n.requestCamera=function(e,n,a,i){return new t((function(t,s){var c=e instanceof Object?e:{};"environment"!==e&&"back"!==e||(c.facingMode=e),n&&(c.beautify=!0),a&&(c.animoji=!0),i&&(c.hand=!0),p(o(),c,(function(e,n){null==r._nativeApp?s(new Error("Native app is released. !!!Please do not call any native related functions. ")):e?t(e):s(new Error(n))}))}))}}}var ReactApp=function(){function ReactApp(e){var t=this;this.componentEventBatch={};var r=e.nativeApp,n=e.params,o=e.lynx;for(var a in this.modules={},this._apiList={},this._componentMap={},this._dynamicComponentMap={},this._componentInstance={},this._reactLynx={},this._nativeApp=r,this._params=n,this.rlynxVersion=null==n?void 0:n.rlynxVersion,this._propsMap=new propsMap,this._reactLynx.propsMap=this._propsMap,this._reactLynx.genPropsId=genPropsId,this._reactLynx.ReactComponent=ReactComponent,this._reactLynx.createRef=function(){return{current:null,id:null}},this._getComponent=this.getComponent,this.setTimeout=r.setTimeout,this.setInterval=r.setInterval,this.clearInterval=r.clearInterval,this.clearTimeout=r.clearTimeout,this.NativeModules=r.nativeModuleProxy,this.NetworkingModule=r.nativeModuleProxy.NetworkingModule,this.LynxTestModule=r.nativeModuleProxy.LynxTestModule,this.BDLynxModule=r.nativeModuleProxy.BDLynxModule,this.nativeAppId=r.id,this.lynx={},this.lynx.requireModule=this.requireModule.bind(this),o)this.lynx[a]=o[a];this.lynx.setTimeout=this.setTimeout=this.wrapReport(r.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(r.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=r.clearInterval,this.lynx.clearTimeout=this.clearTimeout=r.clearTimeout,this.lynx.reportError=this.reportError.bind(this),this.GlobalEventEmitter=new EventEmitter(this.__internal__callNativeModule.bind(this)),this._lazyCallableModules=new Map,this._BDLynxAPIModule=new EventEmitter,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.setupPromise(r.setTimeout,r.clearTimeout),initHeliumCanvas(this,this.lynx.Promise),this.setupIntersectionApi(),Hooks.mountHooks(this,{catchError:function(e){reportThrowError({error:new InternalRuntimeError("Hooks: "+t._nativeApp.id+" error: "+e.message,e.stack),nativeApp:t._nativeApp,rawError:e,proxy:t})}}),this._reactLynx.ReactFcComponent=ReactFcComponent,this._reactLynx.useReducer=Hooks.useReducer,this._reactLynx.useState=Hooks.useState,this._reactLynx.useEffect=Hooks.useEffect,this._reactLynx.useMemo=Hooks.useMemo,this._reactLynx.useCallback=Hooks.useCallback,this._reactLynx.useInstance=Hooks.useInstance,this._reactLynx.useRef=Hooks.useRef,this._reactLynx.createRef=function(e){return{current:e,id:null}},this.lynx.setSharedData=function(e,t){_global.sharedData[e]=t;var r={};r[e]=t,_global.shareDataSubject.notifyDataChange(r)},this.lynx.getSharedData=function(e){return _global.sharedData[e]},this.lynx.registerSharedDataObserver=function(e){_global.shareDataSubject.registerObserver(e)},this.lynx.removeSharedDataObserver=function(e){_global.shareDataSubject.removeObserver(e)}}return ReactApp.prototype.requireModule=function(e){if("string"!=typeof e||!e)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(e),(0,_global.initBundle)({tt:this})},ReactApp.prototype.reportError=function(e){var t;if("[object Error]"===Object.prototype.toString.call(e))t=e;else{var r=void 0;r="string"!=typeof e?JSON.stringify(r):e,t=new Error(r)}reportError(new UserRuntimeError(t.message,t.stack),this._nativeApp,{proxy:this})},ReactApp.prototype.setupPromise=function(e,t){var r=this,n=getPromiseMaybePolyfill(e,(function(e,t){try{t.stack||(t=new Error("wrapError-"+JSON.stringify(t))),t&&reportError(new UserRuntimeError("unhandled rejection: "+t.message,t.stack),r._nativeApp,{proxy:r})}catch(e){}}),t);this.lynx.Promise=n},Object.defineProperty(ReactApp.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"apiList",{set:function(e){this._apiList=__assign(__assign({},this._apiList),e)},enumerable:!1,configurable:!0}),ReactApp.prototype.Card=function(e){var t=this;try{var r=t._params||{},n=r.initData,o=r.updateData,a=r.initConfig;if(e.__config={$type:"card",appInstance:t,initData:n},t.appInstance=new e(e.defaultProps),n&&"object"==typeof n&&t.initCardData(n),o&&"object"==typeof o)try{var i=t.appInstance;Object.keys(o).forEach((function(e){i.state[e]=o[e]})),isFunctionComponent(i)&&Hooks.syncInsHookState(i,o)}catch(e){var s=e||{},p=s.message,c=s.stack;reportThrowError({error:new InternalRuntimeError("initCardData "+n+" error: "+(p="native updateCardData error in Card:  "+p),c),nativeApp:t._nativeApp,rawError:e,proxy:this}),t.dispatchError(p||c||"unknown error in updateCardState")}a&&"object"==typeof a&&t.processCardConfig(a)}catch(e){reportThrowError({error:new InternalRuntimeError("create Card(): "+t._nativeApp.id+" error: "+e.message,e.stack),nativeApp:t._nativeApp,rawError:e,proxy:this}),this.dispatchError(e.message)}},ReactApp.prototype.Component=function(e){var t=_global.globComponentRegistPath;this._componentMap[t]=e},ReactApp.prototype.initCardData=function(e){var t=this;try{var r=t.appInstance;Object.keys(e).forEach((function(t){hasProperty(r.state,t)||(r.state[t]=e[t])}))}catch(r){var n=r||{},o=n.message,a=n.stack;reportThrowError({error:new InternalRuntimeError("initCardData "+e+" error: "+(o="native initCardData error in ReactCard:  "+o),a),nativeApp:t._nativeApp,rawError:r,proxy:this}),t.dispatchError(o||a||"unknown error in initCardData")}},ReactApp.prototype.processCardConfig=function(e){var t=this,r=t.appInstance;try{if(e&&"object"==typeof e){var n=e[CARD_CONFIG_STR];if(isObject(n)){var o=n.theme;isObject(o)&&(r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o))}}}catch(e){reportThrowError({error:new InternalRuntimeError("processCardConfig Card(): "+t._nativeApp.id+" error: "+e.message,e.stack),nativeApp:t._nativeApp,rawError:e,proxy:this}),this.dispatchError(e.message)}},ReactApp.prototype.onReactCardRender=function(e,t){var r=this,n=r.appInstance;if("string"==typeof e&&(e=JSON.parse(e)),n.$cardInit)try{if(e&&"object"==typeof e&&Object.keys(e).forEach((function(t){isNull(e[t])||(n.state[t]=e[t]),isFunctionComponent(n)&&Hooks.syncInsHookState(n,e,!0)})),!t)return;l={};var o={};n.$hasDerivedFunction&&!n.$shouldIgnoreLepusDataProcessor&&(l=n.$class.getDerivedStateFromProps(n.props||{},n.state)||{},o=diffData(n.state,l),n.state=Object.assign(n.state,l));var a=n.executeJSRender()||{},i=diffData(n.state,a);n.state=Object.assign(n.state,a);var s=Object.assign(o,i);Object.keys(s).length&&n.updateDataToNative(s)}catch(t){var p=t||{},c=p.message,u=p.stack;reportThrowError({error:new InternalRuntimeError("onReactCardRender not first "+e+" error: "+c,u),nativeApp:r._nativeApp,rawError:t,proxy:this}),r.dispatchError(c||u||"unknown error in onReactCardRender")}else{n.$cardInit=!0;var l={};n.$hasDerivedFunction&&(l=n.$class.getDerivedStateFromProps(n.props,n.state)),n.state=Object.assign(n.state,l||{}),n.state=Object.assign(n.state,n.executeJSRender()||{}),n.updateDataToNative(filterReactComponentData(n.state))}},ReactApp.prototype.onReactComponentCreated=function(e,t,r,n){var o,a;e.startsWith("/")&&(e=e.substr(1));var i=this._componentMap[e];i.defaultProps=i.defaultProps||{};var s=(r?this._propsMap.getProps(r.propsId):null)||{},p=Object.keys(i.defaultProps),c=Object.keys(s),u=__spread(p);c.forEach((function(e){u.includes(e)||u.push(e)}));var l=Object.keys(r),f=u.filter((function(e){return!l.includes(e)||null===r[e]})),h={};Object.keys(i.defaultProps).filter((function(e){c.includes(e)&&null===s[e]?h[e]=null:h[e]=i.defaultProps[e]}));var d=shallowMergeEx(r,s);d=shallowMergeEx(h,d,!0),i.__config={$type:"component",appInstance:this};var v=new i(d);this.setComponent(t,v);var y=[];Object.keys(v.state).forEach((function(e){hasProperty(n,e)&&(null!==n[e]&&void 0!==n[e]||null===v.state[e]||void 0===v.state[e])||y.push(e)}));var m=null;v.$hasDerivedFunction&&(f.length||y.length||!v.$shouldIgnoreLepusDataProcessor)?(m=v.$class.getDerivedStateFromProps(v.props,v.state),v.state=Object.assign(v.state,m||{})):v.$hasDerivedFunction&&(v.state=shallowMergeEx(v.state,n,!0));var _=v.executeJSRender()||{};v.state=Object.assign(v.state,_);var g=diffData(n,m);y.push.apply(y,__spread(Object.keys(g),Object.keys(_)));for(var E={},b=0;b<y.length;b++){var x=y[b];E[x]=v.state[x]}v.updateDataToNative(filterReactComponentData(E));var A=this.componentEventBatch[t];if(A&&(this.componentEventBatch[t]=void 0,Array.isArray(A)))try{for(var w=__values(A),C=w.next();!C.done;C=w.next()){var I=C.value;this.publicComponentEvent(t,I.eventName,I.data)}}catch(e){o={error:e}}finally{try{C&&!C.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}},ReactApp.prototype.onReactComponentRender=function(e,t,r,n){var o=this.getComponent(e),a=shallowClone(this._propsMap.getProps(t.propsId)),i=shallowMergeEx(a,t);if(Object.keys(i).forEach((function(e){o.props[e]=i[e]})),r&&"object"==typeof r&&Object.keys(r).forEach((function(e){isNull(r[e])||(o.state[e]=r[e]),isFunctionComponent(o)&&Hooks.syncInsHookState(o,r,!0)})),n){var s=Object.keys(a),p=Object.keys(t),c=s.filter((function(e){return!p.includes(e)||null===t[e]})),u={},l={};!o.$hasDerivedFunction||o.$shouldIgnoreLepusDataProcessor&&!c.length?o.$hasDerivedFunction&&(o.state=Object.assign(o.state,r||{})):(u=o.$class.getDerivedStateFromProps(o.props,o.state),l=diffData(o.state,u),o.state=Object.assign(o.state,u||{}));var f=o.executeJSRender()||{},h={};!o.$shouldDiffState&&isEmptyObject(u)||(h=diffData(o.state,f)),o.state=Object.assign(o.state,f||{});var d=Object.assign(l,h);Object.keys(d).length&&o.updateDataToNative(d)}},ReactApp.prototype.reactUpdateComponent=function(e){e.$init?e.$hasDidUpdateLifecycle&&(e.componentDidUpdate(e.prevProps,e.prevState),e.prevProps=deepClone(e.props),e.prevState=deepClone(e.state)):(e.$init=!0,e.componentDidMount(),e.$hasDidUpdateLifecycle&&(e.prevProps=deepClone(e.props),e.prevState=deepClone(e.state))),isFunctionComponent(e)&&Hooks.executeEffects(e)},ReactApp.prototype.onReactCardDidUpdate=function(){var e=this.appInstance;this.reactUpdateComponent(e)},ReactApp.prototype.onReactComponentDidUpdate=function(e){var t=this.getComponent(e);this.reactUpdateComponent(t)},ReactApp.prototype.onReactComponentUnmount=function(e){var t=this.getComponent(e),r=t.props?t.props.propsId:null;r&&this._propsMap.deleteProps(r),isFunctionComponent(t)&&Hooks.cleanUpHooks(t),t.componentWillUnmount(),t=null,delete this._componentInstance[e]},ReactApp.prototype.onNativeAppReady=function(e){},ReactApp.prototype.callFunction=function(e,t,r){var n=this.appInstance;try{var o=n.getJSModule(e);"function"==typeof o[t]&&o[t].apply(o,r)}catch(r){var a=r||{},i=a.message,s=a.stack;reportThrowError({error:new InternalRuntimeError("callFunction "+e+"/"+t+" error: "+i,s),nativeApp:this._nativeApp,rawError:r,proxy:this}),this.dispatchError(i||s||"unknown error in callFunction")}},ReactApp.prototype.setComponent=function(e,t){this._componentInstance[e]=t,t.componentId=e},ReactApp.prototype.getComponent=function(e){return this._componentInstance[e]},ReactApp.prototype.getComponentOptions=function(e,t){return t?this._dynamicComponentMap[t][e]:this._dynamicComponentMap[DEFAULT_ENTRY][e]},ReactApp.prototype.setupIntersectionApi=function(){var e=this;this._apiList.createIntersectionObserver=function(t,r){var n=t.componentId,o=void 0===n?"":n;return e._intersectionObserverManager.createIntersectionObserver(o,r)},this.lynx.createIntersectionObserver=this._apiList.createIntersectionObserver},ReactApp.prototype.onIntersectionObserverEvent=function(e,t,r){var n=this._intersectionObserverManager.getObserver(e);n&&n.invokeCallback(t,r)},ReactApp.prototype.publishEvent=function(e,t){var r=this,n=r.appInstance;try{if("function"==typeof n[e])return void r.handlerEvent(n,e,t);throw new Error("Do not have "+e+"\n        handler in Card "+r._nativeApp.id)}catch(t){var o=t||{},a=o.message,i=o.stack;reportThrowError({error:new InternalRuntimeError("publishEvent "+e+" error: "+a,i),nativeApp:this._nativeApp,rawError:t,proxy:this}),r.dispatchError(a||i||"unknown error in publishEvent")}},ReactApp.prototype.saveComponentEventBatch=function(e,t,r){this.componentEventBatch[e]||(this.componentEventBatch[e]=[]),this.componentEventBatch[e].push({eventName:t,data:r})},ReactApp.prototype.publicComponentEvent=function(e,t,r){var n=this,o=n.getComponent(e);if(o)try{"function"==typeof o[t]&&n.handlerEvent(o,t,r)}catch(r){var a=r||{},i=a.message,s=a.stack;reportThrowError({error:new InternalRuntimeError("publicComponentEvent "+e+"/"+t+" error: "+i,s),nativeApp:this._nativeApp,rawError:r,proxy:this}),n.dispatchError(i||s||"unknown error in publicComponentEvent")}else n.saveComponentEventBatch(e,t,r)},ReactApp.prototype.handlerEvent=function(e,t,r){var n=e,o=[],a=[],i={},s=r.type,p=r.currentTarget.dataset||{};r.preventDefault=function(){},r.stopPropagation=function(){},Object.keys(p).forEach((function(e){var t=e.toLocaleLowerCase();if(/^e/.test(t)&&(t=t.replace(/^e/,"")).indexOf(s)>=0){var r=t.replace(s,"");/^(a[a-z]|so)$/.test(r)&&(i[r]=p[e])}}));var c=null;"so"in i&&(n="this"!==i.so?i.so:e,c="this"!==i.so?i.so:null,delete i.so),isObject(i)&&(a=Object.keys(i).sort().map((function(e){return i[e]}))),o=-1===t.indexOf("funPrivate")?__spread(a,[r]):__spread([c],a,[r]),e[t].apply(n,o)},ReactApp.prototype.callDestroyLifetimeFun=function(){var e=this;try{Object.keys(this._componentInstance).forEach((function(t){e.onReactComponentUnmount(t)})),this.appInstance.componentWillUnmount()}catch(e){}},ReactApp.prototype.destroy=function(){try{isFunctionComponent(this.appInstance)&&Hooks.cleanUpHooks(this.appInstance),this.modules=null,this._params=null,this._componentMap=null,this._propsMap=null,this.appInstance=null,this.GlobalEventEmitter=null,this._BDLynxAPIModule=null,this._lazyCallableModules=null,this._nativeApp=null,this.componentEventBatch=null,this._heliumData&&clearHeliumCanvas(this)}catch(e){}},ReactApp.prototype.onAppEnterBackground=function(e){var t=this;try{t.appInstance&&isFunction(this.appInstance.componentDidHide)&&t.appInstance.componentDidHide(e),this.GlobalEventEmitter.emit("onHide",e)}catch(e){var r=e||{},n=r.message,o=r.stack;reportThrowError({error:new InternalRuntimeError("onAppEnterBackground error: "+n,o),nativeApp:this._nativeApp,rawError:e,proxy:this}),t.dispatchError(n||o||"unknown error in onAppEnterBackground")}},ReactApp.prototype.onAppEnterForeground=function(e){var t=this;try{t.appInstance&&isFunction(this.appInstance.componentDidShow)&&t.appInstance.componentDidShow(e),this.GlobalEventEmitter.emit("onShow",e)}catch(a){var r=a||{},n=r.message,o=r.stack;reportThrowError({error:new InternalRuntimeError("onAppEnterForeground "+e+" error: "+n,o),nativeApp:this._nativeApp,rawError:a,proxy:this}),t.dispatchError(n||o||"unknown error in onAppEnterForeground")}},ReactApp.prototype.onAppError=function(e){this.dispatchError(e),reportError(new InternalRuntimeError("JS error from native: "+e,e),this._nativeApp,{proxy:this})},ReactApp.prototype.dispatchError=function(e){this.appInstance&&isFunction(this.appInstance.componentDidCatch)&&this.appInstance.componentDidCatch(e)},ReactApp.prototype.onAppFirstScreen=function(e){},ReactApp.prototype.registerModule=function(e,t){this._lazyCallableModules[e]=t},ReactApp.prototype.__internal__callNativeModule=function(e,t,r){var n=this._nativeApp.nativeModuleProxy[e];if(n){var o=n[t];o&&Function.prototype.apply.call(o,void 0,r)}},ReactApp.prototype.wrapReport=function(e,t){var r=this;function n(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return e.apply(this,n)}catch(e){reportThrowError({error:new UserRuntimeError(t+": "+r._nativeApp.id+" error: "+e.message,e.stack),nativeApp:r._nativeApp,rawError:e,proxy:r})}}}return function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(e,void 0,__spread([n(t)],r))}},ReactApp.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=params&&params.dynamicComponentEntry?params.dynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(e){reportThrowError({error:new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+e.message,e.stack),nativeApp:this._nativeApp,rawError:e,proxy:this})}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),that._reactLynx,that.nativeAppId,void 0,LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},ReactApp.prototype.define=function(e,t,r){var n=this,o=r||DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][e]={runed:!1,factory:t.bind(n)}},ReactApp.prototype.bindComponentWithRefId=function(e,t,r){if("card"===e)this.appInstance.$pureData[r]=t,this.appInstance.bindSingleRef(r);else{var n=this._componentInstance[e];isObject(n)&&(n.$pureData[r]=t,n.bindSingleRef(r))}},ReactApp}();function pathProcess(e){var t=e.match(/(.*)\/([^/]+)?$/);return(null==t?void 0:t[1])?t[1]:"./"}function inRequire(e){var t=this,r=pathProcess(e);return function(e){var n=[],o=(r+"/"+e).split("/"),a=o.length;if("string"!=typeof e)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+e+" in app: "+t._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var p=n.join("/");return p.endsWith(".js")||(p+=".js"),t.require(p)}}function parsePath(e){if("String"!==getDataType(e)){var t="path should be string";throw nativeConsole.error("TypeError",t),new AppServiceEngineKnownError(t)}for(var r=!1,n=!1,o=e.length,a=[],i="",s=0,p=0;p<o;p++){var c=e[p];if("\\"===c)p+1<o&&("."===e[p+1]||"["===e[p+1]||"]"===e[p+1])?(i+=e[p+1],p++):i+="\\";else if("."===c)i&&(a.push(i),i="");else if("["===c){if(i&&(a.push(i),i=""),0===a.length)throw nativeConsole.error("DataPathError","Path can not start with []: "+e),new AppServiceEngineKnownError("Path can not start with []: "+e);n=!0,r=!1}else if("]"===c){if(!r)throw nativeConsole.error("DataPathError","Must have number in []: "+e),new AppServiceEngineKnownError("Must have number in []: "+e);n=!1,a.push(s),s=0}else if(n){if(c<"0"||c>"9")throw nativeConsole.error("DataPathError","Only number 0-9 could inside []: "+e),new AppServiceEngineKnownError("Only number 0-9 could inside []: "+e);r=!0,s=10*s+c.charCodeAt(0)-48}else i+=c}if(i&&a.push(i),0===a.length)throw nativeConsole.error("DataPathError","Path can not be empty"),new AppServiceEngineKnownError("Path can not be empty");return a}function getObjectByPath(e,t){for(var r={},n=void 0,o=parsePath(t),a=e,i=0;i<o.length;i++)Number(o[i])===o[i]&&o[i]%1==0?Array.isArray(a)||(r[n]=[],a=r[n]):"Object"===getDataType(a)||(r[n]={},a=r[n]),n=o[i],r=a,a=a[o[i]];return{obj:r,key:n}}var BaseInstance=function(){function e(e){var t=e.type,r=e.componentId,n=void 0===r?"":r,o=e.resolvedPromise;this._pendingState=null,this._cbs=null,this._type=t,this._componentId=n,this.resolvedPromise=o}return e.prototype.nextTick=function(e){this.resolvedPromise.then(e)},e.prototype.updateData=function(e){for(var t in e){void 0===e[t]&&nativeConsole.error("setData field "+t+" to undefined not work");var r=getObjectByPath(this.data,t),n=r.obj,o=r.key;n&&(n[o]=deepClone(e[t]))}},e.prototype.dataQueueUpdate=function(e,t,r){var n=this,o=n._pendingState,a=e._queue;if(isNullOrUndef(o))n._pendingState=t;else for(var i in t)({}).hasOwnProperty.call(t,i)&&(o[i]=t[i]);a.includes(n)||a.push(n),isFunction(r)&&(Array.isArray(n._cbs)||(n._cbs=[]),n._cbs.push(r.bind(n))),e._microTaskPending||(e._microTaskPending=!0,this.nextTick((function(){var t,r=[];for(e._microTaskPending=!1;t=a.pop();){var n=t._type,o=t.componentId,i=t._cbs,s=t._pendingState,p=callbackMerge$1.bind(t,i);t._pendingState=null,t._cbs=null,r.push({type:n,componentId:o,data:s,callback:p})}e._nativeApp.batchedUpdateData(r)})))},e}();function callbackMerge$1(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)e[t]()}var Animation=function(){function e(t){this.effect=t,this.id="__lynx-inner-js-animation-"+e.count++}return e.prototype.cancel=function(){this.effect.target.canceleAnimate(this)},e.prototype.pause=function(){this.effect.target.pauseAnimate(this)},e.prototype.play=function(){this.effect.target.playAnimate(this)},e.count=0,e}(),KeyframeEffect=function(e,t,r){this.target=e,this.keyframes=t,this.options=r},Element=function(){function e(e,t,r){this._root=e,this._idSelector="#"+t,this._lynx=r,this._element=void 0}return e.prototype.ensureElement=function(){this._element||(this._element=this._lynx.createElement(this._root,this._idSelector))},e.prototype.animate=function(e,t){this.ensureElement();var r=new Animation(new KeyframeEffect(this,e,t));return this._element.animate(0,r.id,e,t),r},e.prototype.playAnimate=function(e){this._element.animate(1,e.id,void 0,void 0)},e.prototype.pauseAnimate=function(e){this._element.animate(2,e.id,void 0,void 0)},e.prototype.canceleAnimate=function(e){this._element.animate(3,e.id,void 0,void 0)},e.prototype.finishAnimate=function(e){this._element.animate(4,e.id,void 0,void 0)},e}(),CreateApp=function(e){function t(t,r,n,o){var a=e.call(this,{type:"card",resolvedPromise:n})||this,i=a;a.__proxy=o,a.$parent=null,i.$children=[],i._lazyCallableModules=new Map,i._queue=[],i._microTaskPending=!1,i._nativeApp=r,a._options=t,i.data=t.data||{},delete t.data;var s=(_global.BDLynxSDKCore||{}).registerNativeEvent;i.theme=t.theme||{},delete t.theme;var p=Object.assign({},lifeCycleFun,t),c=t.methods||{};return Object.keys(c).forEach((function(e){"function"==typeof c[e]&&(i[e]=wrapUserFunction("at Card methods: "+e,i,c[e]).bind(i))})),Object.keys(p).forEach((function(e){"function"==typeof p[e]?i[e]=wrapUserFunction("at Card "+e,i,p[e]).bind(i):i[e]=deepClone(p[e])})),a.GlobalEventEmitter=new EventEmitter(a.__internal__callNativeModule.bind(a)),a.registerModule("GlobalEventEmitter",a.GlobalEventEmitter),a.registerModule("BDLynxAPIModule",new EventEmitter),"function"==typeof s&&s(i._lazyCallableModules.BDLynxAPIModule),a}return __extends(t,e),t.prototype.setData=function(t,r){var n=this;try{var o=getDataType(t);if("Object"!==o)throw new Error("setData's first param must be object, you pass "+o);var a=getDataType(r);if(r&&"Function"!==a)throw new Error("setData's second param must be function, you pass "+a);e.prototype.updateData.call(this,t),e.prototype.dataQueueUpdate.call(this,n,t,wrapUserFunction("at card setData/dataQueueUpdate",n,r).bind(n))}catch(e){var i=e||{},s=i.message,p=i.stack;reportError(new InternalRuntimeError("setData error: "+(s="setData err: "+s),p),n._nativeApp),n.onError(s)}},t.prototype.getNodeRef=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},t.prototype.getElementById=function(e){return new Element("card",e,this.__proxy.lynx)},t.prototype.selectComponent=function(e,t){var r=this,n=getDataType(t);if(t&&"Function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent("card",e,!0,wrapUserFunction("at card selectComponent",this,(function(e){Array.isArray(e)&&t(r.__proxy.getComponent(e[0]))})).bind(this))},t.prototype.updateTheme=function(e,t){void 0===t&&(t=!1);var r=this;try{var n=getDataType(e);if("Object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};t?Object.assign(o,e):Object.assign(o,r.theme,e),Object.keys(o).forEach((function(e){o[e]||delete o[e]})),r._nativeApp.updateData({__card_config_:{theme:o}})}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateTheme error: "+(i="updateTheme err: "+i),s),r._nativeApp),r.onError(i)}},t.prototype.registerModule=function(e,t){this._lazyCallableModules[e]=t},t.prototype.getJSModule=function(e){return this._lazyCallableModules[e]},t.prototype.addGlobalEventListener=function(e,t,r){this.getJSModule("GlobalEventEmitter").addListener(e,t,r)},t.prototype.setSharedData=function(e,t){_global.sharedData[e]=t},t.prototype.getSharedData=function(e){return _global.sharedData[e]},t.prototype.__internal__callNativeModule=function(e,t,r){var n=this._nativeApp.nativeModuleProxy[e];if(n){var o=n[t];o&&Function.prototype.apply.call(o,void 0,r)}},t}(BaseInstance);function optionProcess(e){return __assign({},e)}var behaviorBookmarks=new Map;function mixinBehaviors(e){var t={created:[e.created],attached:[e.attached],ready:[e.ready],moved:[e.moved],detached:[e.detached]};Array.isArray(e.behaviors)&&forEachRight(e.behaviors,(function(e){var r=behaviorBookmarks.get(e);r&&componentLifeCycles.forEach((function(e){"function"==typeof r[e]&&t[e].push(r[e])}))})),componentLifeCycles.forEach((function(r){e[r]=function(){for(var e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t[r].forEach((function(t){return t.apply(e,n)}))}}))}function createBehavior(e,t){var r=e||{},n=r.created,o=void 0===n?noop$1:n,a=r.attached,i=void 0===a?noop$1:a,s=r.ready,p=void 0===s?noop$1:s,c=r.moved,u=void 0===c?noop$1:c,l=r.detached,f=void 0===l?noop$1:l;e=__assign({},e);var h=Object.assign(e,{created:o,attached:i,ready:p,moved:u,detached:f}),d=__assign({},h);return mixinBehaviors(d),d}function registerBehavior(e){try{if(isObject(e)){var t=guid(),r=Object.keys(e).reduce((function(t,r){return componentLifeCycles.includes(r)&&"function"==typeof e[r]&&(t[r]=e[r]),t}),{});return behaviorBookmarks.set(t,r),t}}catch(e){var n=e||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("registerBehavior  "+o,a),this._nativeApp,{proxy:this}),this._appInstance.onError(o||a||"unknow error in registerBehavior")}}var Component=function(e){function t(t,r,n,o){var a=e.call(this,{type:"component",componentId:t,resolvedPromise:o})||this,i=a,s=deepClone(n),p=(s=createBehavior(s)).methods||{},c=s.pageLifetimes||{},u=s.lifetimes||{};i.$parent=null,i.$children=[],i._initDataUpdated=!1,i._appInstance=r.appInstance,i._proxyInstance=r,i.componentId=t,i.behaviors=s.behaviors||[],i._nativeApp=r.nativeApp,i._lifetimes=u,i._pageLifetimes=c,a.GlobalEventEmitter=r.appInstance.GlobalEventEmitter,isObject(s.data)||(s.data={}),isObject(s.properties)||(s.properties={});var l=s.data;for(var f in i._initData=__assign({},l),s.properties)l[f]=s.properties[f].value;return i.data=i.properties=l,i._properties=s.properties||{},Object.keys(p).forEach((function(e){"function"==typeof p[e]&&(i[e]=wrapUserFunction("at component methods "+e,i._appInstance,p[e]).bind(i))})),Object.keys(s).forEach((function(e){"function"==typeof s[e]&&(i[e]=wrapUserFunction("at component option "+e,i._appInstance,s[e]).bind(i))})),a}return __extends(t,e),t.prototype.getNodeRef=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,e)},t.prototype.getNodeRefFromRoot=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},t.prototype.getElementById=function(e){return new Element(this.componentId,e,this._proxyInstance.lynx)},t.prototype.selectComponent=function(e,t){var r=this,n=getDataType(t);if(t&&"Function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent(this.componentId,e,!0,wrapUserFunction("at component selectComponent",this,(function(e){Array.isArray(e)&&t(r._proxyInstance.getComponent(e[0]))})).bind(this))},t.prototype.getJSModule=function(e){return this._appInstance._lazyCallableModules[e]},t.prototype.setData=function(t,r){var n=this,o=n.componentId,a=n._initData;try{var i=getDataType(t);if("Object"!==i)throw new Error("setData's first param must be object, you pass "+i);var s=getDataType(r);if(r&&"Function"!==s)throw new Error("setData's second param must be function, you pass "+s);n._initDataUpdated||(n._nativeApp.updateComponentData(o,a,null),n._initDataUpdated=!0),e.prototype.updateData.call(this,t),e.prototype.dataQueueUpdate.call(this,n._appInstance,t,wrapUserFunction("at Component setData",n._appInstance,r).bind(n))}catch(e){var p=e||{},c=p.message,u=p.stack;reportError(new InternalRuntimeError("Component "+(c="setData err: "+c),u),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(c)}},t.prototype.triggerEvent=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(e,{eventDetail:t,eventOption:r,componentId:o})}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("Component "+(i="triggerEvent error: "+i),s),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(i)}},t}(BaseInstance);function componentActivity(e,t,r,n,o){var a=this,i=o||{},s=i.initData,p=i.entryName,c=i.parentId;try{if(!componentLifeCycles.includes(t))return;if("created"===t){n.startsWith("/")&&(n=n.substr(1));var u=a.getComponentOptions(n,p),l=null;if(!isObject(u))throw new Error("component: "+n+" is not exist!");try{l=new Component(r,a,u,e)}catch(e){throw new Error("create component error: "+e)}if(isObject(s)&&Object.keys(s).forEach((function(e){hasProperty(l.data,e)||(l.data[e]=s[e])})),isString(c)){var f=null;(f="card"===c?a.appInstance:a.getComponent(c))&&(l.$parent=f,f.$children.push(l))}a.setComponent(r,l)}var h=a.getComponent(r);if("attached"===t&&!h._initDataUpdated){var d=!0;a.allRemoved&&(d=!a.allRemoved[n]),d&&a._nativeApp.updateComponentData(r,h._initData,null),h._initDataUpdated=!0}if(!h)throw new Error("component instance: "+r+" is not exist");markComponentState(h,t);var v=(h._lifetimes||{})[t]||h[t];if("function"==typeof v&&v(o),"detached"===t){var y=h.$parent,m=(y||{}).$children;if(Array.isArray(m)){var _=[];m.forEach((function(e){e.componentId!==r&&_.push(e)})),y.$children=_}h.$parent=null}}catch(e){var g=e||{},E=g.message,b=g.stack;reportError(new InternalRuntimeError("componentActivity "+t+"/"+r+"/"+n+" error: "+e.message,e.stack),a._nativeApp,{proxy:this}),a._appInstance.onError(E||b||"unknow error in componentActivity")}}function markComponentState(e,t){"attached"===t?e.componentState="attached":"detached"===t?e.componentState="detached":"ready"===t?(e.componentState="ready",e.$_internal_shouldStopBatching=!0):"moved"===t?e.componentState="moved":"created"===t&&(e.componentState="created")}function pageLifetimeFun(e,t){void 0===t&&(t={});var r=this._componentInstance||{};Object.keys(r).forEach((function(n){var o=r[n],a=(o._pageLifetimes||{})[e];"function"==typeof a&&a.call(o,t)}))}var AppProxy=function(){function AppProxy(e){this.componentEventBatch={};var t=e.nativeApp,r=e.params,n=e.lynx;for(var o in this.modules={},this._apiList={},this._componentOpts={},this._componentInstance={},this._nativeApp=t,this._params=r,this.lynx={},n)this.lynx[o]=n[o];this.lynx.requireModule=this.requireModule.bind(this),this.lynx.setTimeout=this.setTimeout=this.wrapReport(t.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(t.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=t.clearInterval,this.lynx.clearTimeout=this.clearTimeout=t.clearTimeout,this.NativeModules=t.nativeModuleProxy,this.NetworkingModule=t.nativeModuleProxy.NetworkingModule,this.LynxTestModule=t.nativeModuleProxy.LynxTestModule,this.BDLynxModule=t.nativeModuleProxy.BDLynxModule,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.nativeAppId=t.id,this.setupPromise(t.setTimeout,t.clearTimeout),this.lynx.Navigator=t.nativeModuleProxy.NavigationModule,initHeliumCanvas(this,this.lynx.Promise),this.setupInteralApi(),this.lynx.setSharedData=function(e,t){_global.sharedData[e]=t;var r={};r[e]=t,_global.shareDataSubject.notifyDataChange(r)},this.lynx.getSharedData=function(e){return _global.sharedData[e]},this.lynx.registerSharedDataObserver=function(e){_global.shareDataSubject.registerObserver(e)},this.lynx.removeSharedDataObserver=function(e){_global.shareDataSubject.removeObserver(e)}}return AppProxy.prototype.setupPromise=function(e,t){var r=this,n=getPromiseMaybePolyfill(e,(function(e,t){try{t.stack||(t=new Error("wrapError-"+JSON.stringify(t))),t&&reportError(new UserRuntimeError("unhandled rejection: "+t.message,t.stack),r._nativeApp,{proxy:r})}catch(e){}}),t);this.resolvedPromise=n.resolve(),this.lynx.Promise=n,this.lynx.reportError=this.reportError.bind(this)},AppProxy.prototype.wrapReport=function(e,t){var r=this;function n(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return e.apply(this,n)}catch(e){reportError(new UserRuntimeError(t+": "+r._nativeApp.id+" error: "+e.message,e.stack),r._nativeApp,{proxy:r})}}}return function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(e,void 0,__spread([n(t)],r))}},AppProxy.prototype.setupInteralApi=function(){var e=this;this._apiList.createIntersectionObserver=function(t,r){var n=t.componentId,o=void 0===n?"":n;return e._intersectionObserverManager.createIntersectionObserver(o,r)}},Object.defineProperty(AppProxy.prototype,"apiList",{set:function(e){this._apiList=__assign(__assign({},this._apiList),e)},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"appInstance",{get:function(){return this._appInstance},set:function(e){this._appInstance=e},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),AppProxy.prototype.setAllRemoved=function(e){this.allRemoved=e},AppProxy.prototype.reportError=function(e){var t;if("[object Error]"===Object.prototype.toString.call(e))t=e;else{var r=void 0;r="string"!=typeof e?JSON.stringify(r):e,t=new Error(r)}reportError(new UserRuntimeError(t.message,t.stack),this._nativeApp,{proxy:this})},AppProxy.prototype.requireModule=function(e){if("string"!=typeof e||!e)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(e),(0,_global.initBundle)({tt:this})},AppProxy.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(e){reportError(new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+e.message,e.stack),that._nativeApp,{proxy:that})}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire$1.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),_global.TaroLynx,that.nativeAppId,that.Behavior.bind(tt),LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},AppProxy.prototype.define=function(e,t,r){var n=this,o=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][e]={runed:!1,factory:t.bind(n)}},AppProxy.prototype.Card=function(e){var t=this,r=_global.globComponentRegistPath;this._cardPath=r;try{var n=t._params||{},o=n.initData,a=n.updateData,i=n.initConfig;t._appInstance=new CreateApp(e,t._nativeApp,this.resolvedPromise,t),t.lynx.getJSModule=t._appInstance.getJSModule.bind(t._appInstance),o&&"object"==typeof o&&t.initCardData(o),a&&"object"==typeof a&&t.updateCardData(a),i&&"object"==typeof i&&t.updateCardData(i),t._appInstance.cardState="loaded",t._appInstance.onLoad({}),pageLifetimeFun.call(t,"onLoad")}catch(e){reportError(new InternalRuntimeError("create Card: "+t._nativeApp.id+" error: "+e.message,e.stack),t._nativeApp,{proxy:t}),t._appInstance.onError(e.message)}},AppProxy.prototype.Behavior=function(e){return registerBehavior.call(this,e)},AppProxy.prototype.Component=function(e){var t=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath,n=optionProcess(e);t||(t=DEFAULT_ENTRY),this._componentOpts[t]||(this._componentOpts[t]={}),this._componentOpts[t][r]=n},AppProxy.prototype.setComponent=function(e,t){this._componentInstance[e]=t},AppProxy.prototype.getComponent=function(e){return this._componentInstance[e]},AppProxy.prototype.getComponentOptions=function(e,t){var r=null;try{r=t?this._componentOpts[t][e]:this._componentOpts[DEFAULT_ENTRY][e]}catch(t){throw new Error("Component ("+e+") is not register. \n please use Component({...}) to register.")}return r},AppProxy.prototype.callDestroyLifetimeFun=function(){try{pageLifetimeFun.call(this,"onDestroy"),this._appInstance.onDestroy()}catch(e){}},AppProxy.prototype.destroy=function(){try{this.modules=null,this._params=null,this._appInstance.cardState="destroyed",this._appInstance=null,this._nativeApp=null,this.resolvedPromise=null,this._heliumData&&clearHeliumCanvas(this)}catch(e){}},AppProxy.prototype.publishEvent=function(e,t){var r=this,n=r._appInstance,o=n._options[e];try{if("function"==typeof n[e])return void n[e](t);if("function"==typeof o)return void o.call(n,t);throw new Error("Do not have "+e+"\n        handler in Card "+r._nativeApp.id)}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publishEvent "+e+" error: "+i,s),r._nativeApp,{proxy:r}),n.onError(i||s||"unknow error in publishEvent")}},AppProxy.prototype.publicComponentEvent=function(e,t,r){var n=this,o=n.getComponent(e);if(o&&o.$_internal_shouldStopBatching)try{"function"==typeof o[t]&&o[t](r)}catch(r){var a=r||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publicComponentEvent "+e+"/"+t+" error: "+i,s),n._nativeApp,{proxy:n}),n._appInstance.onError(i||s||"unknow error in publicComponentEvent")}else n.saveComponentEventBatch(e,t,r)},AppProxy.prototype.onIntersectionObserverEvent=function(e,t,r){var n=this._intersectionObserverManager.getObserver(e);n&&n.invokeCallback(t,r)},AppProxy.prototype.onComponentActivity=function(e,t,r,n){var o,a;componentActivity.call(this,this.resolvedPromise,e,t,r,n);var i=this.getComponent(t);if(i&&i.$_internal_shouldStopBatching){var s=this.componentEventBatch[t];if(this.componentEventBatch[t]=void 0,Array.isArray(s))try{for(var p=__values(s),c=p.next();!c.done;c=p.next()){var u=c.value;this.publicComponentEvent(t,u.eventName,u.data)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}},AppProxy.prototype.onComponentPropertiesChanged=function(e,t){var r=this,n=r.getComponent(e);try{if(!n)throw new Error("component is not exist, error in onComponentPropertiesChanged");var o=n.properties,a=[];isObject(t)&&(Object.keys(t).forEach((function(e){var r=o[e],i=t[e];r!==i&&(n.data[e]=n.properties[e]=i,a.push([r,i,e]))})),a.length>0&&a.forEach((function(e){var t=__read(e,3),r=t[0],o=t[1],a=t[2],i=n._properties[a]||{},s=i.observer;isObject(i)&&(isString(s)&&(s=n[s]),"function"==typeof s&&s.call(n,o,r))})))}catch(n){var i=n||{},s=i.message,p=i.stack;reportError(new InternalRuntimeError("onComponentPropertiesChanged "+e+"/"+t+" error: "+s,p),r._nativeApp,{proxy:r}),r._appInstance.onError(s||p||"unknow error in onComponentPropertiesChanged")}},AppProxy.prototype.updateCardData=function(e){var t=this;try{var r=t._appInstance;"string"==typeof e&&(e=JSON.parse(e));var n=e.__card_config_;isObject(n)?Object.keys(n).forEach((function(e){if("theme"===e){var t=n[e];isObject(t)&&(r.theme=t,"function"==typeof r.onThemeChanged&&r.onThemeChanged(t))}})):(Object.keys(e).forEach((function(t){var n=e[t];r.data[t]=n})),"function"==typeof r.onDataChanged&&r.onDataChanged.call(r,e))}catch(r){var o=r||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("updateCardData "+e+" error: "+a,i),t._nativeApp,{proxy:t}),t._appInstance.onError(a||i||"unknow error in updateCardData")}},AppProxy.prototype.initCardData=function(e){var t=this;try{var r=t._appInstance;Object.keys(e).forEach((function(t){hasProperty(r.data,t)||(r.data[t]=e[t])}))}catch(r){var n=r||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("initCardData "+e+" error: "+(o="native initCardData error in Card:  "+o),a),t._nativeApp,{proxy:t}),t._appInstance.onError(o||a||"unknow error in initCardData")}},AppProxy.prototype.onNativeAppReady=function(e){var t=this;try{var r=!0;t.allRemoved&&(r=!t.allRemoved["/"+this._cardPath]),r&&t._nativeApp.updateData(t._appInstance.data),t._appInstance.cardState="ready",t._appInstance.onReady({}),pageLifetimeFun.call(t,"onReady")}catch(e){var n=e||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("onNativeAppReady error: "+o,a),t._nativeApp,{proxy:t}),t._appInstance.onError(o||a||"unknow error in updateCardData")}},AppProxy.prototype.callFunction=function(e,t,r){var n=this,o=this._appInstance;try{var a=o.getJSModule(e);"function"==typeof a[t]&&a[t].apply(a,r)}catch(r){var i=r||{},s=i.message,p=i.stack;reportError(new InternalRuntimeError("callFunction "+e+"/"+t+" error: "+s,p),n._nativeApp,{proxy:n}),n._appInstance.onError(s||p||"unknow error in callFunction")}},AppProxy.prototype.onAppEnterBackground=function(e){var t=this;try{t._appInstance.onHide(),pageLifetimeFun.call(t,"onHide")}catch(e){var r=e||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterBackground error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppEnterBackground")}},AppProxy.prototype.onAppEnterForeground=function(e){var t=this;try{t._appInstance.onShow(e),pageLifetimeFun.call(t,"onShow")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterForeground "+e+" error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppEnterForeground")}},AppProxy.prototype.onAppError=function(e){var t=this;try{this._appInstance.onError(e),reportError(new InternalRuntimeError("JS error from native: "+e,e),t._nativeApp,{proxy:t})}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppError "+e+" error: "+n,o),t._nativeApp,{proxy:t})}},AppProxy.prototype.onAppFirstScreen=function(e){var t=this;try{this._appInstance.onFirstScreen(e),pageLifetimeFun.call(t,"onFirstScreen")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppFirstScreen "+e+" error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppFirstScreen")}},AppProxy.prototype.saveComponentEventBatch=function(e,t,r){this.componentEventBatch[e]||(this.componentEventBatch[e]=[]),this.componentEventBatch[e].push({eventName:t,data:r})},AppProxy}(),isNativeConsoleHasALog;function pathProcess$1(e){var t=e.match(/(.*)\/([^/]+)?$/);return(null==t?void 0:t[1])?t[1]:"./"}function inRequire$1(e){var t=this,r=pathProcess$1(e);return function(e){var n=[],o=(r+"/"+e).split("/"),a=o.length;if("string"!=typeof e)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+e+" in app: "+t._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var p=n.join("/");return p.endsWith(".js")||(p+=".js"),t.require(p)}}function alog(e){void 0===isNativeConsoleHasALog&&(isNativeConsoleHasALog="function"==typeof nativeConsole.alog),isNativeConsoleHasALog&&nativeConsole.alog("[LynxJSSDK]"+e)}function loadCard(nativeApp,params,lynx){var BDLynxSDKCore=_global.BDLynxSDKCore,apiInit=(BDLynxSDKCore||{}).apiInit,cardType=params.cardType,tt;try{var id=nativeApp.id;if(alog("load card native app id: "+id+" cardType "+cardType),tt="tt"===cardType?new AppProxy({nativeApp:nativeApp,params:params,lynx:lynx}):new ReactApp({nativeApp:nativeApp,params:params,lynx:lynx}),_global.currentAppId=id,_global.multiApps[id]=tt,"function"==typeof apiInit){var apiInstance=apiInit.call(tt);tt.apiList=apiInstance}var contents=nativeApp.readDynamicComponentScripts();if(Array.isArray(contents))for(var i=0;i<contents.length;i++)eval(contents[i]);else"string"==typeof contents&&eval(contents);var appServiceName="app-service.js";if(alog("load card native app load app-service.js params.bundleSupportLoadScript "+params.bundleSupportLoadScript),params.bundleSupportLoadScript){var bundleInitReturnObj=nativeApp.loadScript(appServiceName);if(alog("load card load app-service.js loadScript success"),bundleInitReturnObj&&bundleInitReturnObj.init)bundleInitReturnObj.init({tt:tt}),alog("load card load app-service.js init success");else{var errorMessage="loadCard error: loadScript did not return an function "+bundleInitReturnObj;reportThrowError({error:new InternalRuntimeError(errorMessage),nativeApp:nativeApp,rawError:new Error(errorMessage),proxy:tt})}}else{var jsContent=nativeApp.readScript(appServiceName);eval(jsContent),alog("load card load app-service.js eval success")}nativeApp.setCard(tt)}catch(e){var _a=e||{},message=_a.message,stack=_a.stack;reportThrowError({error:new InternalRuntimeError("loadCard error: "+message,stack),nativeApp:nativeApp,rawError:e,proxy:tt})}}function destroyCard(e){alog("destroy "+e),_global.multiApps[e].destroy(),delete _global.multiApps[e]}function callDestroyLifetimeFun(e){alog("callDestroyLifetimeFun "+e),_global.multiApps[e].callDestroyLifetimeFun()}function loadDynamicComponent(e,t){try{var r=e.nativeApp,n=r.loadScript("app-service.js",t);if(alog("load dynamic component app-service.js loadScript success"),n&&n.init){var o=_global.globDynamicComponentEntry;_global.globDynamicComponentEntry=t,n.init({tt:e}),alog("load dynamic component load app-service.js init success"),_global.globDynamicComponentEntry=o}else{var a="loadCard error: loadScript did not return an function "+n;reportThrowError({error:new InternalRuntimeError(a),nativeApp:r,rawError:new Error(a),proxy:e})}}catch(t){var i=t||{},s=i.message,p=i.stack;reportError(new InternalRuntimeError("loadDynamicComponent error: "+s,p),e.nativeApp,{proxy:e})}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function arrayBufferToBase64(e){var t,r=new Uint8Array(e),n=r.length,o="";for(t=0;t<n;t+=3)o+=chars[r[t]>>2],o+=chars[(3&r[t])<<4|r[t+1]>>4],o+=chars[(15&r[t+1])<<2|r[t+2]>>6],o+=chars[63&r[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function base64ToArrayBuffer(e){var t,r,n,o,a,i=.75*e.length,s=e.length,p=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<s;t+=4)r=lookup[e.charCodeAt(t)],n=lookup[e.charCodeAt(t+1)],o=lookup[e.charCodeAt(t+2)],a=lookup[e.charCodeAt(t+3)],u[p++]=r<<2|n>>4,u[p++]=(15&n)<<4|o>>2,u[p++]=(3&o)<<6|63&a;return c}_global.loadCard=loadCard,_global.destroyCard=destroyCard,_global.callDestroyLifetimeFun=callDestroyLifetimeFun,_global.loadDynamicComponent=loadDynamicComponent,_global.__lynxArrayBufferToBase64=arrayBufferToBase64,_global.__lynxBase64ToArrayBuffer=base64ToArrayBuffer,_global.LynxSDKCore={report:legacyReportError,reportInner:wrapInnerFunction,reportUser:wrapUserFunction}})();
//# sourceMappingURL=lynx_core.js.map
