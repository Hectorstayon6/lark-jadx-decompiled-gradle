!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalShareInfo=t.saveTranslateDetailTrackItem=t.saveWordsAndTranslatedResult=t.getTranslatedText=t.removeFromQuerySendingList=t.appendToQuerySendingList=t.isQuerySending=t.isQuerySended=t.updateTranslateStatus=t.getTranslateStatus=t.addTraverseTurn=t.isContinueTranslating=t.setGlobalShareData=t.getGlobalShareData=t.setRequestCount=t.getRequestCount=void 0;var r=n(2),a=n(6),o=n(1),i=1,s={traverseTurn:0,sendedQueryList:[],sendingQueryList:[],queryTranslateText:{},currentStore:null,needReTraverse:!1,globalMutationObserver:null,globalInteractionObserver:null,translateDetailTrack:[],translateStatus:r.TranslateStatus.Init,originLan:null,targetLan:null,isBannerShow:!1,isBannerClose:!1};t.getRequestCount=function(){return i},t.setRequestCount=function(e){i=e},t.getGlobalShareData=function(e){return s[e]},t.setGlobalShareData=function(e,t){s[e]=t},t.isContinueTranslating=function(){return-1!==[r.TranslateStatus.Translating,r.TranslateStatus.Updating].indexOf(s.translateStatus)},t.addTraverseTurn=function(){s.traverseTurn+=1},t.getTranslateStatus=function(){return s.translateStatus},t.updateTranslateStatus=function(e){s.translateStatus=e,a.updateTranslateStatusToMobile(e)},t.isQuerySended=function(e){return-1!==s.sendedQueryList.indexOf(e)},t.isQuerySending=function(e){return-1!==s.sendingQueryList.indexOf(e)},t.appendToQuerySendingList=function(e){s.sendingQueryList=o.removeDuplicate(s.sendingQueryList.concat(e))},t.removeFromQuerySendingList=function(e){s.sendingQueryList=s.sendingQueryList.filter((function(t){return-1===e.indexOf(t)}))},t.getTranslatedText=function(e){return s.queryTranslateText[e]?s.queryTranslateText[e].target:""},t.saveWordsAndTranslatedResult=function(e,t){s.sendedQueryList=s.sendedQueryList.concat(e),e.length===t.length?e.forEach((function(e,n){s.queryTranslateText[e]={origin:e,target:t[n]}})):o.log("query, translate not match")},t.saveTranslateDetailTrackItem=function(e,t,n){s.translateDetailTrack.push({originInfoList:e,translatedInfoList:t,oriText:n})},t.resetGlobalShareInfo=function(){s.traverseTurn=0,s.sendedQueryList=[],s.sendingQueryList=[],s.queryTranslateText={},s.currentStore=null,s.needReTraverse=!1,s.globalMutationObserver&&(s.globalMutationObserver.disconnect(),s.globalMutationObserver=null),s.globalInteractionObserver&&(s.globalInteractionObserver.disconnect(),s.globalInteractionObserver=null),s.translateDetailTrack=[],s.translateStatus=r.TranslateStatus.Init},window.globalShareData=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=t.log=t.removeDuplicate=t.isSameLanguage=void 0,t.isSameLanguage=function(e,t){return e.code===t.code&&e.name===t.name},t.removeDuplicate=function(e){return Array.from(new Set(e))},t.log=function(e,t){void 0===t&&(t=!0)},t.debounce=function(e,t){void 0===t&&(t=16);var n=null;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];clearTimeout(n),n=window.setTimeout((function(){e.apply(null,r)}),t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslateStatus=void 0,function(e){e[e.Init=0]="Init",e[e.Translating=1]="Translating",e[e.Success=2]="Success",e[e.Fail=3]="Fail",e[e.Restore=4]="Restore",e[e.Updating=5]="Updating"}(t.TranslateStatus||(t.TranslateStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSubmitNode=t.appendTranslateNodeText=t.getTranslateWrapperNode=t.getTranslateNode=t.getNearestNotSplitTagInfo=t.isIgnoreParseEle=t.isTranslatedNode=t.isDisplayNoneNode=t.isElementHidden=t.removeNode=t.replaceWithSpace=t.hasOneChild=t.removeChildNodes=t.isElementNode=t.isTextNode=t.isEmptyTextNode=t.isParentNodeMergeFont=t.isNodeNotSplit=t.isParentNodeNotSplit=t.insertNodeBefore=t.insertNodeAfter=void 0;var r=n(4),a=n(1);function o(e){return e&&e.nodeType===Node.ELEMENT_NODE}function i(e){return null===e?"":e.replace(/^[\s\xa0]+/,"")}function s(e){if(!o(e))return!1;if(!e||"FONT"!==e.nodeName||"inherit"!==e.style.verticalAlign)return!1;var t=e.firstChild;return!(!t||"FONT"!==t.nodeName||"inherit"!==t.style.verticalAlign)}t.insertNodeAfter=function(e,t){try{t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}catch(e){a.log("insertNodeAfter fail")}},t.insertNodeBefore=function(e,t){try{t.parentNode&&t.parentNode.insertBefore(e,t)}catch(e){a.log("insertNodeBefore fail")}},t.isParentNodeNotSplit=function(e){var t=e.parentNode;return t&&-1!==r.NOT_SPLIT_TAG.indexOf(t.nodeName)},t.isNodeNotSplit=function(e){return e&&-1!==r.NOT_SPLIT_TAG.indexOf(e.nodeName)},t.isParentNodeMergeFont=function(e){var t=e.parentNode;return t&&-1!==r.NEED_MERGE_FONT_TAG.indexOf(t.nodeName)},t.isEmptyTextNode=function(e){return""===i(e.nodeValue).trim()},t.isTextNode=function(e){return e&&e.nodeType===Node.TEXT_NODE},t.isElementNode=o,t.removeChildNodes=function(e){for(var t=void 0;t=e.firstChild;)e.removeChild(t)},t.hasOneChild=function(e){return e&&1==e.childNodes.length},t.replaceWithSpace=i,t.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.isElementHidden=function(e){return!!o(e)&&"none"===window.getComputedStyle(e).display},t.isDisplayNoneNode=function(e){return e.style&&"none"===e.style.display},t.isTranslatedNode=s,t.isIgnoreParseEle=function(e){return!!s(e)||(-1!==e.nodeName.indexOf("-")||-1!==r.NO_TRANSLATE_TAG.indexOf(e.nodeName))},t.getNearestNotSplitTagInfo=function(e){var t=e.node,n=e.depth;if(1===n||!t.parentNode)return{node:null,depth:-1};for(var a=n-1;a>=1;a--){if(!t.parentNode)return{node:null,depth:-1};if(t.parentNode&&-1===r.NOT_SPLIT_TAG.indexOf(t.parentNode.nodeName))return{node:t.parentNode,depth:a};t=t.parentNode}return{node:null,depth:-1}},t.getTranslateNode=function(e){var t=document.createElement("font");t.style.verticalAlign="inherit";var n=document.createElement("font");return n.style.verticalAlign="inherit",n.innerText=e,t.appendChild(n),t},t.getTranslateWrapperNode=function(){var e=document.createElement("font");return e.style.verticalAlign="inherit",e},t.appendTranslateNodeText=function(e,t){var n=e.firstChild.cloneNode(!1);n.textContent=t,e.appendChild(n)},t.isSubmitNode=function(e){return null!=e&&e instanceof HTMLInputElement&&"submit"==e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOT_SPLIT_TAG=t.NEED_MERGE_FONT_TAG=t.NO_TRANSLATE_TAG=t.PER_REQUEST_WORD_COUNT=t.TIMEOUT_FOR_SEND_REQ=void 0,t.TIMEOUT_FOR_SEND_REQ=0,t.PER_REQUEST_WORD_COUNT=10,t.NO_TRANSLATE_TAG=["SCRIPT","STYLE","HEAD","IFRAME","IMG"],t.NEED_MERGE_FONT_TAG=["B","EM"],t.NOT_SPLIT_TAG=["A","B","EM","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","I","TEXTAREA","LABEL","FONT","CITE"]},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyNodeList=t.addTranslateNodeToStore=t.appendNeedTranslateNode=t.findLastTraverseEle=t.trackParseNode=t.getNewParseStore=void 0,t.getNewParseStore=function(e){return e?r(r({},e),{translateNodeList:[],traceHistory:[],queryMap:{},queryList:[],isFinish:!1,traverseCount:0,lastUnTranslateEle:null}):{translateNodeList:[],traceHistory:[],queryMap:{},queryList:[],lastUnTranslateEle:null,traverseCount:0,isFinish:!1,workList:[]}},t.trackParseNode=function(e,t){t.traceHistory.push(e);for(var n=e.depth,r=[],a=function(e){var n=t.traceHistory.filter((function(t){return t.depth===e}));n.length>0&&r.push(n[n.length-1])},o=1;o<=n;o++)a(o);t.traceHistory=r},t.findLastTraverseEle=function(e,t){var n=e-1,r=t.traceHistory.filter((function(e){return e.depth===n}));return r[r.length-1].node},t.appendNeedTranslateNode=function(e,t){e.text&&t.translateNodeList.push(e)},t.addTranslateNodeToStore=function(e,t,n){n.queryList.push(e),n.queryMap[e]?n.queryMap[e].push(t):n.queryMap[e]=[t]},t.getKeyNodeList=function(e,t){var n=[];return e.forEach((function(e){for(var r=t.queryMap[e],a=0;a<r.length;a++){var o=r[a];if(!o.isTranslate){for(var i=0,s=0;s<o.nodesInfo.length;s++)o.nodesInfo[s].depth<o.nodesInfo[i].depth&&(i=s);var l=o.nodesInfo[i].node;l&&l.parentNode&&n.push(l.parentNode)}}})),n}},function(e,t,n){"use strict";var r,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};if(Object.defineProperty(t,"__esModule",{value:!0}),t.onManualTranslate=t.toggleBannerDisplay=t.updateTranslateStatusToMobile=t.sendTranslateWordRequest=t.getTranslateSettings=t.originLanDetect=t.originLanDetectSetting=void 0,!u())try{r=n(12).bridge}catch(e){r=window._LarkJsBridge}var i=n(2),s=n(17),l=n(0),d=n(1);function u(){return e=navigator.userAgent,/android/i.test(e)&&window.h5sdk;var e}var c=!1;function f(e,t,n){if(u()){if(!c)return void window.h5sdk.ready((function(){c=!0,f(e,t,n)}));n?window.LkWebViewJavascriptBridge.callHandler(e,t,n.onSuccess,n.keep,{onSuccess:n.onSuccess,onFailed:n.onFail}):window.LkWebViewJavascriptBridge.callHandler(e,t)}else r.invoke(e,t,n)}function p(e){f("biz.larkWebTranslate.changeBanner",{isShow:e},{onSuccess:function(t){l.setGlobalShareData("isBannerClose",t.isClose),l.setGlobalShareData("isBannerShow",e)},onFail:function(){}})}t.originLanDetectSetting=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,t){f("biz.larkWebTranslate.getDetectSetting",{},{onSuccess:function(t){var n=t.maxContentLen;e(n)},onFail:function(){t("detectSourceLanguage fail")}})}))]}))}))},t.originLanDetect=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){return t=s.getWebsiteWords(e),[2,new Promise((function(e,n){f("biz.larkWebTranslate.detectSourceLanguage",{textList:t},{onSuccess:function(t){e(t)},onFail:function(){n("detectSourceLanguage fail")}})}))]}))}))},t.getTranslateSettings=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){f("biz.larkWebTranslate.getTranslateSettings",{originLan:e.code,url:window.location.href},{onSuccess:function(e){t(e)},onFail:function(){n("getTranslateSettings fail")}})}))]}))}))},t.sendTranslateWordRequest=function e(t,n,r){var a=l.getGlobalShareData("targetLan"),o=l.getGlobalShareData("originLan");if(a&&o){if(0===t.filter((function(e){return!l.isQuerySended(e)})).length){var s=t.map((function(e){return l.getTranslatedText(e)}));r(s)}d.log("start sendTranslateWordRequest, words: "+t),f("biz.larkWebTranslate.sendTranslateRequest",{targetLang:a.code,originLang:o.code,words:t},{onSuccess:function(e){d.log("sendTranslateWordRequest success, words: "+t+", result: "+JSON.stringify(e)+", targetLang: "+a.code+", originLang: "+o.code);var n=e.data;r(n)},onFail:function(a){if(d.log("sendTranslateWordRequest error, "+a),a){if(--n>0)return e(t,n,r);l.updateTranslateStatus(i.TranslateStatus.Fail)}}})}},t.updateTranslateStatusToMobile=function(e){var t;d.log("updateTranslateStatusToMobile "+e);var n=l.getTranslateStatus(),r=((t={})[i.TranslateStatus.Init]="origin",t[i.TranslateStatus.Fail]="failed",t[i.TranslateStatus.Success]="target",t[i.TranslateStatus.Translating]="loading",t[i.TranslateStatus.Restore]="origin",t[i.TranslateStatus.Updating]="",t);if(e!==i.TranslateStatus.Updating&&(n!==i.TranslateStatus.Fail||e!==i.TranslateStatus.Fail)){e===i.TranslateStatus.Init&&p(!0);var a=l.getGlobalShareData("originLan"),o=l.getGlobalShareData("targetLan"),s=0;e===i.TranslateStatus.Success&&(s=500),setTimeout((function(){f("biz.larkWebTranslate.updateTranslateStatus",{translateStatus:r[e],originLang:a,targetLang:o},{onSuccess:function(){},onFail:function(){}})}),s)}},t.toggleBannerDisplay=p,t.onManualTranslate=function(e){document.addEventListener("biz.larkWebTranslate.onManualTranslate",(function(t){e(t)}),!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._configReady=!0,this._configEvent="LarkConfigReady",this._invokeQueue=[],window.addEventListener(this._configEvent,this._onBridgeReady.bind(this),!1)}return e.prototype._fireEvent=function(e,t){var n=new CustomEvent(e,t);window.dispatchEvent(n)},e.prototype._submitTask=function(e){this._invokeQueue.push(e)},e.prototype._onBridgeReady=function(){this._invokeQueue.forEach((function(e){e()}))},e.prototype.register=function(e,t){},e.prototype.connectLkWebViewJavascriptBridge=function(e){},e.prototype.invoke=function(e,t,n){},e.prototype.config=function(e,t,n){var r=this;this.invoke(e,t,{onSuccess:function(){r._configReady=!0,n.onSuccess&&n.onSuccess(),r._fireEvent(r._configEvent,{})},onFailed:function(e){r._configReady=!0,n.onFailed&&n.onFailed(e),r._fireEvent(r._configEvent,{})}}),this._configReady=!1},e}();t.BaseBridgeImpl=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayStartNewTraverse=t.startNewTraverse=t.parse=void 0;var r=n(2),a=n(0),o=n(5),i=n(3),s=n(1),l=n(9),d=n(4);function u(e,n,s){if(a.isContinueTranslating()){var c=!1;if(e||1!==s||(c=!0),function(e,t,n,r){if(n.traverseCount+=1,r)return n.lastUnTranslateEle=null,n.traverseCount=0,l.doTranslate(n),!0;if(function(e,t){if(e.traverseCount>200&&t&&i.isElementNode(t)&&-1===d.NOT_SPLIT_TAG.indexOf(t.nodeName))return!0;return!1}(n,e))return n.lastUnTranslateEle={ele:e,depth:t},n.traverseCount=0,l.doTranslate(n),setTimeout((function(){n.lastUnTranslateEle&&u(n.lastUnTranslateEle.ele,n,n.lastUnTranslateEle.depth)}),d.TIMEOUT_FOR_SEND_REQ),!0;return!1}(e,s,n,c))c&&(n.isFinish=!0,1===a.getGlobalShareData("traverseTurn")&&a.updateTranslateStatus(r.TranslateStatus.Success),a.getGlobalShareData("needReTraverse")&&(a.updateTranslateStatus(r.TranslateStatus.Updating),t.delayStartNewTraverse(o.getNewParseStore(a.getGlobalShareData("currentStore")),"start new traverse dom change, before last turn finish")));else if(e)if(o.trackParseNode({node:e,depth:s},n),i.isIgnoreParseEle(e))u(e.nextSibling,n,s);else if(i.isElementNode(e))i.isSubmitNode(e)&&o.appendNeedTranslateNode({node:e,depth:s,text:i.replaceWithSpace(e.value).trim()},n),u(e.firstChild,n,s+1);else if(i.isTextNode(e)){o.appendNeedTranslateNode({node:e,depth:s,text:i.replaceWithSpace(e.nodeValue).trim()},n),u(e.nextSibling,n,s)}else{u(e.nextSibling,n,s)}else u(o.findLastTraverseEle(s,n).nextSibling,n,s-1)}}function c(e,t){void 0===t&&(t=""),t&&s.log(t),a.addTraverseTurn(),a.setGlobalShareData("currentStore",e),a.setGlobalShareData("needReTraverse",!1),u(document.documentElement,e,1)}t.parse=u,t.startNewTraverse=c,t.delayStartNewTraverse=s.debounce(c,200)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTranslateRequest=t.doTranslate=t.addKeyNodesToNeedTranslateWorkList=t.doTranslateWork=void 0;var r=n(0),a=n(4),o=n(5),i=n(6),s=n(18),l=n(3),d=n(1);function u(e,t,n){n.forEach((function(e){r.getGlobalShareData("globalInteractionObserver").observe(e)})),e.workList&&e.workList.push({work:t,nodeList:n,isFinish:!1})}function c(e,t,n){if(void 0===n&&(n=3),!(n<=0)){var a=e.filter((function(e){return!r.isQuerySended(e)})),o=e.filter((function(e){return r.isQuerySended(e)})),l=o.map((function(e){return r.getTranslatedText(e)}));if(0!==a.length)0!==e.filter((function(e){return!r.isQuerySending(e)})).length&&(r.appendToQuerySendingList(a),i.sendTranslateWordRequest(a,3,(function(e){r.removeFromQuerySendingList(a);var n=a.concat(o),i=e.concat(l);r.saveWordsAndTranslatedResult(a,e),s.replaceWords(n,i,t)})));else s.replaceWords(o,l,t)}}function f(e,t){return"<a i="+t+">"+e+"</a>"}t.doTranslateWork=function(e,t){for(var n=function(n){var a=e.workList[n];if(a.nodeList.forEach((function(e){if(t===e)return a.work(),void(a.isFinish=!0)})),a.isFinish){var o=r.getGlobalShareData("globalInteractionObserver");a.nodeList.forEach((function(e){o.unobserve(e)}))}},a=0;a<e.workList.length;a++)n(a);e.workList=e.workList.filter((function(e){return!e.isFinish}))},t.addKeyNodesToNeedTranslateWorkList=u,t.doTranslate=function(e){for(var t=0;t<e.translateNodeList.length;t++){var n=e.translateNodeList[t];if(0!==t){var r=e.translateNodeList[t-1],i=l.getNearestNotSplitTagInfo(r).depth,s=l.getNearestNotSplitTagInfo(r).node,p=l.getNearestNotSplitTagInfo(n).depth,g=l.getNearestNotSplitTagInfo(n).node;if(i>0&&p>0&&i===p&&s===g){var v=e.queryList.pop(),h=e.queryMap[v].pop();0===e.queryMap[v].length&&delete e.queryMap[v];var T=void 0;T=1===h.nodes.length?f(h.text,0)+f(n.text,1):h.text+f(n.text,h.nodes.length),o.addTranslateNodeToStore(T,{text:T,nodesInfo:h.nodesInfo.concat(n),nodes:h.nodes.concat(n.node),isTranslate:!1},e)}else n.text&&o.addTranslateNodeToStore(n.text,{text:n.text,nodesInfo:[n],nodes:[n.node],isTranslate:!1},e)}else o.addTranslateNodeToStore(n.text,{text:n.text,nodesInfo:[n],nodes:[n.node],isTranslate:!1},e)}var N=d.removeDuplicate(e.queryList),S=Math.ceil(N.length/a.PER_REQUEST_WORD_COUNT),y=function(t){var n=N.slice(t*a.PER_REQUEST_WORD_COUNT,(t+1)*a.PER_REQUEST_WORD_COUNT),r=o.getKeyNodeList(n,e);u(e,(function(){return c(n,e),!0}),r)};for(t=0;t<S;t++)y(t);return e.queryList=[],e.translateNodeList=[],!0},t.sendTranslateRequest=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(2),s=n(11),l=n(8),d=n(19),u=n(9),c=n(6),f=n(1),p=n(0),g=n(5);function v(){if(p.getTranslateStatus()===i.TranslateStatus.Init){p.updateTranslateStatus(i.TranslateStatus.Translating);var e=p.getGlobalShareData("originLan"),t=p.getGlobalShareData("targetLan");if(!f.isSameLanguage(e,t)){var n=g.getNewParseStore();p.setGlobalShareData("globalMutationObserver",s.configDomChangeObserver()),p.setGlobalShareData("globalInteractionObserver",s.configDomVisibilityObserver(u.doTranslateWork)),l.startNewTraverse(n)}}}function h(e){var t=e.translateType,n=e.targetLang,r=e.originLang;return f.log("handleManualTranslate, translateType: "+t),"translate"===t?(p.setGlobalShareData("targetLan",n),p.setGlobalShareData("originLan",r),void v()):"revert"===t?(d.restore(),void p.updateTranslateStatus(i.TranslateStatus.Init)):void("updateTargetLang"===t&&(d.restore(),p.setGlobalShareData("targetLan",n),p.setGlobalShareData("originLan",r),p.updateTranslateStatus(i.TranslateStatus.Init),v()))}function T(){o&&clearTimeout(o),o=setTimeout((function(){c.toggleBannerDisplay(!0)}),1e3)}function N(){!function(){var e=0,t=0,n=!1;function r(){var r=p.getGlobalShareData("isBannerShow");((t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)-e>0&&r||t-e<0&&!r)&&(r=!r,c.toggleBannerDisplay(r)),e=t,n=!1}window.addEventListener("scroll",(function(e){var t=p.getGlobalShareData("isBannerClose");n||t||(n=!0,o&&clearTimeout(o),o=setTimeout(r,100))}))}(),c.onManualTranslate(h)}!function(){r(this,void 0,void 0,(function(){var e,t,n,r,o;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),N(),[4,c.originLanDetectSetting()];case 1:return e=a.sent(),[4,c.originLanDetect(e)];case 2:return t=a.sent(),[4,c.getTranslateSettings(t)];case 3:return n=a.sent(),r=n.targetLang,o=n.type,p.setGlobalShareData("originLan",t),p.setGlobalShareData("targetLan",r),"disable"===o?[2]:"manual"===o?(f.log("handle manual translate"),p.updateTranslateStatus(i.TranslateStatus.Init),T(),[2]):("auto"===o&&(f.log("handle auto translate"),p.updateTranslateStatus(i.TranslateStatus.Init),T(),v()),[3,5]);case 4:return a.sent(),p.updateTranslateStatus(i.TranslateStatus.Fail),[3,5];case 5:return[2]}}))}))}(),window.__lark_translate_version__||(window.__lark_translate_version__="0.1.0")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configDomVisibilityObserver=t.configDomChangeObserver=void 0;var r=n(0),a=n(5),o=n(8),i=n(2),s=n(3);t.configDomChangeObserver=function(){var e=new MutationObserver((function(e){if(0!==e.length&&(0!==e.filter((function(e){var t=e.type,n=e.addedNodes,r=e.removedNodes;if("childList"===t){var a=Array.prototype.slice.call(n).filter((function(e){return!s.isDisplayNoneNode(e)})),o=Array.prototype.slice.call(r).filter((function(e){return!s.isDisplayNoneNode(e)}));return(0!==n.length||0!==r.length)&&(0!==a.length||0!==o.length)}return!0})).length&&r.getTranslateStatus()!==i.TranslateStatus.Init)){r.updateTranslateStatus(i.TranslateStatus.Updating);var t=r.getGlobalShareData("currentStore");r.setGlobalShareData("needReTraverse",!0),t&&t.isFinish&&o.delayStartNewTraverse(a.getNewParseStore(t),"start new traverse dom change, after last turn finish")}}));return e.observe(document.documentElement,{attributes:!1,childList:!0,subtree:!0,characterData:!0}),e},t.configDomVisibilityObserver=function(e){return new IntersectionObserver((function(t){t.forEach((function(t){t.intersectionRatio>0&&window.setTimeout((function(){var n=r.getGlobalShareData("currentStore");e(n,t.target)}),0)}))}),{rootMargin:"20px"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(13),o=n(14),i=n(15),s=n(16);t.bridge=r,r||(t.bridge=r=function(e){switch(e){case s.OperatingSystemType.android:return new o.AndroidBridegeImpl;case s.OperatingSystemType.iOS:return new a.iOSBridgeImpl;default:return console.error("Cannot init bridge with Operator System Type: unkonwn"),new i.EmptyBridge}}(s.getOperatingSystemType()),r.connectLkWebViewJavascriptBridge((function(e){e.init((function(e,t){t({init:"success!"})}))})),window._LarkJsBridge=r)},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return window.addEventListener("WebViewJavascriptBridgeReady",t._onBridgeReady.bind(t),!1),t}return a(t,e),t.prototype.invoke=function(e,t,n){var r=o({},t);n&&(r.onSuccess=this._wrapCallback(n.onSuccess,n.keep),r.onFailed=this._wrapCallback(n.onFailed,n.keep),r.callback=r.onSuccess),this._invokeiOS(e,r)},t.prototype._invokeiOS=function(e,t){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.invoke?window.webkit.messageHandlers.invoke.postMessage({method:e,args:t}):this._iOSReady((function(){window.WebViewJavascriptBridge.invoke({method:e,args:t})}))},t.prototype._iOSReady=function(e){window.WebViewJavascriptBridge&&this._configReady?e():this._submitTask(e)},t.prototype._wrapCallback=function(e,t){void 0===t&&(t=!1);var n="func_"+Date.now()+"_"+Math.floor(1e4*Math.random());return window[n]=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];e.apply(void 0,r),t||(window[n]=null)},n},t}(n(7).BaseBridgeImpl);t.iOSBridgeImpl=i},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=e.call(this)||this;return document.addEventListener("LkWebViewJavascriptBridgeReady",t._onBridgeReady.bind(t),!1),t}return a(t,e),t.prototype.register=function(e,t){this._androidReady((function(){window.LkWebViewJavascriptBridge.registerHandler(e,t)}))},t.prototype.connectLkWebViewJavascriptBridge=function(e){var t=this;window.LkWebViewJavascriptBridge?(e(window.LkWebViewJavascriptBridge),this.register("fireEvent",(function(e,n){t._fireEvent(e.name,e.data)}))):(this._submitTask((function(){e(window.LkWebViewJavascriptBridge)})),this.register("fireEvent",(function(e,n){t._fireEvent(e.name,e.data)})))},t.prototype.invoke=function(e,t,n){this._androidReady((function(){n?window.LkWebViewJavascriptBridge.callHandler(e,t,n.onSuccess,n.keep,n):window.LkWebViewJavascriptBridge.callHandler(e,t)}))},t.prototype._androidReady=function(e){if(!window.LkWebViewJavascriptBridge||!window.LkWebViewJavascriptBridge.callHandler||!window.LkWebViewJavascriptBridge.registerHandler)return this._configReady?console.log("add LkWebViewJavascriptBridgeReady listener"):console.log("add _configEvent listener Bridge is not ready"),void this._submitTask(e);this._configReady?e():(console.log("add _configEvent listener Bridge is ready"),this._submitTask(e))},t}(n(7).BaseBridgeImpl);t.AndroidBridegeImpl=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.register=function(e,t){console.error("Cannot call `register` with empty Bridge")},e.prototype.connectLkWebViewJavascriptBridge=function(e){console.error("Cannot call `connectLkWebViewJavascriptBridge` with empty Bridge")},e.prototype.invoke=function(e,t,n){console.error("Cannot call `invoke` with empty Bridge")},e.prototype.config=function(e,t,n){console.error("Cannot call `config` with empty Bridge")},e}();t.EmptyBridge=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.unknown=0]="unknown",e[e.android=1]="android",e[e.iOS=2]="iOS"}(r=t.OperatingSystemType||(t.OperatingSystemType={})),t.getOperatingSystemType=function(){var e=navigator.userAgent;return/android/i.test(e)?r.android:/iPad|iPhone|iPod/.test(e)?r.iOS:r.unknown}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteWords=void 0;var r=n(3);function a(e,t,n,r){var a="",o=r.startTime,i=r.maxContentLen;return!(!e&&1===t)&&(!(Date.now()-o>100)&&(n.forEach((function(e){a=e.text})),a.length<i))}t.getWebsiteWords=function(e){var t,n,o=[],i=[];!function(e,t,n,o){for(var i=e,s=t;a(i,s,n,o);)if(i)if(r.isIgnoreParseEle(i)||r.isElementHidden(i))i=i.nextSibling;else if(n.push({node:i,depth:s,type:"node",text:""}),r.isElementNode(i))i=i.firstChild,s+=1;else{if(r.isTextNode(i)){var l=n[n.length-1];l.type="text",l.text=r.replaceWithSpace(l.node.nodeValue).trim()}i=i.nextSibling}else{var d=n.filter((function(e){return e.depth===s-1}));i=d[d.length-1].node.nextSibling,s-=1}}(document.documentElement,1,o,{startTime:Date.now(),maxContentLen:e});for(var s=function(e){var a=o[e];if(n&&n<=a.depth)return"continue";if("node"===a.type&&(t=a.node,n=0),"text"===a.type&&a.text){var s=r.replaceWithSpace(t&&t.textContent||"").trim();if(s)n=a.depth,0===i.filter((function(e){return-1!==e.indexOf(s)})).length&&i.push(s)}},l=0;l<o.length;l++)s(l);return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceWords=void 0;var r=n(4),a=n(3),o=n(0);function i(e){for(var t=[{start:3584,end:3711},{start:12288,end:12351},{start:12352,end:12543},{start:12784,end:12799},{start:19968,end:40959},{start:65280,end:65519}],n=!0,r=0;r<t.length;r++){var a=t[r];if(e>=a.start&&e<=a.end){n=!1;break}}return n}function s(e){var t=[];!function e(t,n){var r={IMG:" ",BR:"\n"};if(t.nodeName in{SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1})return;if(a.isTextNode(t))return void n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,""));if(t.nodeName in r)return void n.push(r[t.nodeName]);for(var o=t.firstChild;o;o=o.nextSibling)e(o,n)}(e,t);var n=t.join("");return" "!=(n=(n=(n=n.replace(/ \xAD /g," ").replace(/\xAD/g,"")).replace(/\u200B/g,"")).replace(/ +/g," "))&&(n=n.replace(/^\s*/,"")),n}function l(e,t,n,r){if(r.firstChild&&a.isTextNode(r.firstChild)){var o={R:n,T:r.firstChild.nodeValue};e.push(o),t[n]?t[n].end=o:t[n]={start:o,end:o}}}function d(e){for(var t=void 0,n=e.firstChild;n;n=t)t=n.nextSibling,a.isTextNode(n)||(n===e.firstChild?a.insertNodeBefore(n,e):a.insertNodeAfter(n,e),d(n))}t.replaceWords=function(e,t,n){var u;try{for(var c=function(c){var f=t[c].replace(/<a /g,"<span ").replace(/\/a>/g,"/span>");(u=document.createElement("div")).style.display="none",f.indexOf("<i>")>=0?u.innerHTML=f:u.innerHTML="<b>"+f+"</b>",document.body.appendChild(u);var p=e[c];n.queryMap[p].filter((function(e){return!e.isTranslate})).forEach((function(e){!function(e,t,n){var u,c,f=function(e,t,n){for(var r=[],o="",i=[],u=[],c=e.firstChild;c;c=c.nextSibling)if("I"===c.tagName){var f=s(c),p=c.innerHTML;r.push({text:f,html:p,childNodes:u}),o=f}else if("B"===c.tagName){if(o||r.push({text:"",html:"",childNodes:u,details:i}),1===n.nodes.length)l(u,i,0,c);else{for(var g=void 0,v=c.firstChild;v;v=g)g=v.nextSibling,d(v);for(v=c.firstChild;v;v=v.nextSibling)if(v.attributes&&v.attributes.i){var h=parseInt(v.attributes.i.nodeValue,10);if(isNaN(h)||h<0||h>=n.nodes.length)continue;l(u,i,h,v)}else a.isTextNode(v)&&u.push({R:-1,T:v.nodeValue})}u=[],i=[]}return r}(t,0,e),p=e.nodes[0];u=p.parentNode;for(;u&&-1!==r.NOT_SPLIT_TAG.indexOf(u.nodeName);)u=u.parentNode;if(!u)return;for(var g,v=[],h=-1,T=[],N=[],S=function(t){var n=f[t],r=!1;!function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!(r.R>=0||0===n)){var a=-1,o=-1,s=e[n-1].R;if(-1!==s){var l=void 0;if(0!==s&&(a=t.nodesInfo[s].depth),n<e.length-1){if(-1===(l=e[n+1].R))continue;0!==l&&(o=t.nodesInfo[l].depth)}if(a>=0||o>=0){var d=!1;(0>a||o<a)&&n<e.length-1&&(d=!0);var u=d?e[n+1]:e[n-1];if(u.R<t.nodes.length&&t.nodes[u.R]){var c=r.T;if(r.T="",/^ +$/.test(c))i(d?u.T.charCodeAt(0):u.T.charCodeAt(u.T.length-1))&&(u.T=d?c+u.T:u.T+c)}}}}}}(n.childNodes,e),n.childNodes.forEach((function(t,n){var o;if(!(t.R<0||0===e.nodes.length)){var i=e.nodes[t.R];if(a.isTextNode(i)){if(t.R<=h){if(-1!==T.indexOf(t.R))if(a.isParentNodeNotSplit(i)){S=i.parentNode;for(var s=0;a.isParentNodeNotSplit(S)&&a.hasOneChild(S.parentNode);)s++,S=S.parentNode;for(var l=S.cloneNode(!0),d=l;s>0;)d=d.firstChild,s--;g.parentNode&&l.nodeName===g.parentNode.nodeName?(c=a.getTranslateNode(t.T),a.insertNodeAfter(c,g),g=c):(a.removeChildNodes(d),c=a.getTranslateNode(t.T),d.appendChild(c),a.insertNodeAfter(l,g),g=l)}else c=a.getTranslateNode(t.T),a.insertNodeAfter(c,g),g=c;else{if(a.isParentNodeNotSplit(i)&&a.hasOneChild(i.parentNode)){c=a.getTranslateNode(t.T),i.parentNode.appendChild(c);for(S=i.parentNode;a.isParentNodeNotSplit(S)&&a.hasOneChild(S.parentNode);)S=S.parentNode;a.insertNodeAfter(S,g),g=S,a.isParentNodeMergeFont(i)&&a.removeNode(i)}else c=a.getTranslateNode(t.T),a.insertNodeAfter(c,g),g=c;T.push(t.R)}return N.push({node:c,oriNodeIndexList:[t.R]}),v=[],void(c=null)}if(h=t.R,T.push(t.R),a.isParentNodeNotSplit(i))if(a.hasOneChild(i.parentNode)){var u=i.parentNode.cloneNode(!1);if(a.isParentNodeMergeFont(i)){if(c&&r){var f=a.getTranslateWrapperNode();return f.textContent=t.T,u.appendChild(f),c.appendChild(u),g=c,void v.push(t.R)}c=a.getTranslateNode(t.T),u.appendChild(c),a.insertNodeAfter(u,i.parentNode),g=u,v=[],N.push({node:c,oriNodeIndexList:[t.R]}),c=null}else{for(c=a.getTranslateNode(t.T),i.parentNode.appendChild(c),g=i.parentNode;a.isParentNodeNotSplit(g)&&a.hasOneChild(g.parentNode);)g=g.parentNode;v=[],N.push({node:c,oriNodeIndexList:[t.R]}),c=null}}else c=a.getTranslateNode(t.T),a.insertNodeAfter(c,i),g=c,v=[],N.push({node:c,oriNodeIndexList:[t.R]}),c=null;else{if(0===n&&(r=!0),c)v.push(t.R),a.appendTranslateNodeText(c,t.T);else{c=a.getTranslateNode(t.T),a.insertNodeAfter(c,i);var p={node:c,oriNodeIndexList:[t.R]};v=p.oriNodeIndexList,N.push(p)}g=c}}else if(a.isSubmitNode(i)){var S;(S=i.cloneNode(!0)).value=t.T;var y=a.getTranslateWrapperNode();y.appendChild(S),null===(o=i.parentNode)||void 0===o||o.replaceChild(y,i),N.push({node:y,oriNodeIndexList:[t.R]})}}}))},y=0;y<f.length;y++)S(y);e.nodes.forEach((function(e,t){if(a.isParentNodeMergeFont(e))a.removeNode(e.parentNode);else{for(var n=!1,r=0;r<N.length;r++){-1!==N[r].oriNodeIndexList.indexOf(t)&&(n=!0)}n&&a.removeNode(e)}}));var b=e.nodes.map((function(e){return{node:e}}));o.saveTranslateDetailTrackItem(b,N,n)}(e,u,p),e.isTranslate=!0})),a.removeNode(u),u=null},f=0;f<t.length;f++)c(f)}catch(e){u&&a.removeNode(u)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restore=void 0;var r=n(2),a=n(0),o=n(4),i=n(3),s=n(1);t.restore=function(){a.updateTranslateStatus(r.TranslateStatus.Restore);var e=a.getGlobalShareData("translateDetailTrack"),t=e.map((function(e){return e.originInfoList})),n=e.map((function(e){return e.translatedInfoList}));a.resetGlobalShareInfo(),n.forEach((function(e,n){for(var r=t[n],a=-1,s={},l=function(t){var n=e[t].node,l=e[t].oriNodeIndexList;if(n){i.removeChildNodes(n),l.forEach((function(e){if(!s[e])if(e<a)for(var t=e+1;t<=a;){if(s[t]){if(s[t].parentNode){var l=void 0;if(l=(d=r[e].node).parentNode&&-1!==o.NEED_MERGE_FONT_TAG.indexOf(d.parentNode.nodeName)?d.parentNode:d,n.appendChild(l),i.isParentNodeNotSplit(n)&&i.hasOneChild(n.parentNode)){for(l=n.parentNode;i.isParentNodeNotSplit(l)&&i.hasOneChild(l.parentNode);)l=l.parentNode;i.insertNodeBefore(l,s[t]),s[e]=l}else i.insertNodeBefore(n,s[t]),s[e]=l}break}t++}else if(e<r.length&&r[e].node){var d=r[e].node;i.isParentNodeMergeFont(d)?(n.appendChild(d.parentNode),s[e]=d.parentNode):(n.appendChild(d),i.isParentNodeNotSplit(n)&&i.hasOneChild(n.parentNode)?s[e]=n.parentNode:s[e]=d),e>a&&(a=e)}}));var d=n.parentNode;if(d&&Node.DOCUMENT_FRAGMENT_NODE!==d.nodeType)for(var u=void 0;u=n.firstChild;)u.nodeName===d.nodeName?(d.insertBefore(u.firstChild,n),i.removeNode(u)):d.insertBefore(u,n);i.removeNode(n)}},d=0;d<e.length;++d)l(d)})),s.log("restore success")}}]);